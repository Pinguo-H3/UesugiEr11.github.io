<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JavaWeb | Erii B1og</title><meta name="keywords" content="Java,Web,Tomcat,Http,Mavan,Servlet,Cookie,Session,Filter,Listener,JDBC"><meta name="author" content="Erii"><meta name="copyright" content="Erii"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="JavaWeb学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb">
<meta property="og:url" content="http://uesugier11.github.io/2020/10/01/JavaWeb/index.html">
<meta property="og:site_name" content="Erii B1og">
<meta property="og:description" content="JavaWeb学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200923234159053.png">
<meta property="article:published_time" content="2020-10-01T09:10:47.425Z">
<meta property="article:modified_time" content="2020-10-30T13:47:49.713Z">
<meta property="article:author" content="Erii">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="Tomcat">
<meta property="article:tag" content="Http">
<meta property="article:tag" content="Mavan">
<meta property="article:tag" content="Servlet">
<meta property="article:tag" content="Cookie">
<meta property="article:tag" content="Session">
<meta property="article:tag" content="Filter">
<meta property="article:tag" content="Listener">
<meta property="article:tag" content="JDBC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200923234159053.png"><link rel="shortcut icon" href="/UesugiEr11.github.io/img/favicon.png"><link rel="canonical" href="http://uesugier11.github.io/2020/10/01/JavaWeb/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><link rel="stylesheet" href="/UesugiEr11.github.io/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/UesugiEr11.github.io/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-10-30 21:47:49'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/UesugiEr11.github.io/atom.xml" title="Erii B1og" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/UesugiEr11.github.io/img/avater.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/UesugiEr11.github.io/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/UesugiEr11.github.io/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/UesugiEr11.github.io/categories/"><div class="headline">分类</div><div class="length-num">72</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/UesugiEr11.github.io/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/UesugiEr11.github.io/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200923234159053.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/UesugiEr11.github.io/">Erii B1og</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/UesugiEr11.github.io/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/UesugiEr11.github.io/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/UesugiEr11.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">JavaWeb</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-01T09:10:47.425Z" title="发表于 2020-10-01 17:10:47">2020-10-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-10-30T13:47:49.713Z" title="更新于 2020-10-30 21:47:49">2020-10-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/UesugiEr11.github.io/categories/JavaWeb/">JavaWeb</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">17.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>73分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1、基本概念"><a href="#1、基本概念" class="headerlink" title="1、基本概念"></a>1、基本概念</h1><h2 id="1-1、web开发"><a href="#1-1、web开发" class="headerlink" title="1.1、web开发"></a>1.1、web开发</h2><ul>
<li><p>什么是web？web就是网页 比如百度</p>
</li>
<li><p>静态资源和动态资源区别：</p>
<ul>
<li><p>静态资源/静态web：</p>
<ul>
<li>html，css</li>
<li>所有人看到的东西都一样</li>
</ul>
</li>
<li><p>动态资源/动态web：</p>
<ul>
<li><p>servlet、jsp、ASP</p>
</li>
<li><p>看到的东西有可能是不一样的</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-2、web应用程序"><a href="#1-2、web应用程序" class="headerlink" title="1.2、web应用程序"></a>1.2、web应用程序</h2><p>web应用程序是什么？是我们用可以用浏览器所访问的程序 不同于之前的用编译器然后控制台运行的程序</p>
<ul>
<li>网页：xxx.html类似于此类后缀文件</li>
<li>web应用程序的组成部分：<ul>
<li>html，css，js（静态资源）</li>
<li>jsp，servlet（动态资源）</li>
<li>jar包</li>
<li>配置文件 properties</li>
<li>java程序</li>
</ul>
</li>
</ul>
<p>web程序写完后，外界想访问 需要一个服务器进行管理</p>
<h2 id="1-3、静态web（服务器）"><a href="#1-3、静态web（服务器）" class="headerlink" title="1.3、静态web（服务器）"></a>1.3、静态web（服务器）</h2><ul>
<li>后缀为：.html 此类的 只要一直保存在服务器端 那就能直接被读取</li>
<li>此处的webserver为：apache/iis等</li>
<li><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/%E9%9D%99%E6%80%81web.png" alt="image-20200728024108377"></li>
<li>客户端通过发送请求到服务器端，其中webservice访问xxx.html 得到数据，通过web service这个服务再做出响应给客户端。常用的WebServer为Apache，tomcat等。</li>
<li>静态web特点：<ul>
<li>无法更新，很僵硬<ul>
<li>轮播图</li>
<li>JavaScript</li>
</ul>
</li>
<li>无法与数据库交互，数据无法持久化，用户无法交互</li>
</ul>
</li>
</ul>
<h2 id="1-4、动态web（服务器）"><a href="#1-4、动态web（服务器）" class="headerlink" title="1.4、动态web（服务器）"></a>1.4、动态web（服务器）</h2><ul>
<li>此处的webserver为：apache/iis等</li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/%E5%8A%A8%E6%80%81web.png" alt="image-20200728025953481"></p>
<ul>
<li>动态web特点：<ul>
<li>若动态web资源出现错误，后台程序需要重新写→停机维护</li>
<li>web页面可以更新</li>
<li>可以与数据库交互，把数据持久化（注册账号，修改信息等）</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201001170339068.png" alt="image-20201001170339068"></p>
<p>或是这么理解：浏览器≈客户端</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/%E7%AE%80%E7%95%A5%E5%9B%BE.png" alt="img"></p>
<h1 id="2、web服务器"><a href="#2、web服务器" class="headerlink" title="2、web服务器"></a>2、web服务器</h1><h2 id="2-1、技术讲解"><a href="#2-1、技术讲解" class="headerlink" title="2.1、技术讲解"></a>2.1、技术讲解</h2><ul>
<li><p><strong>ASP：</strong></p>
<ul>
<li><p>微软，运用的就是ASP</p>
</li>
<li><p>是HTML语言中夹杂着VB脚本，即ASP+COM:ASP做前台页面，后台使用VB COM+组件对数据进行操作</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        &lt;%&gt;</span><br><span class="line">            System.out.println(&quot;hello&quot;);</span><br><span class="line">        &lt;/%&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>




</li>
</ul>
</li>
</ul>
<ul>
<li>PHP<ul>
<li>开发速度快，跨平台，代码简单</li>
<li>无法承担大的访问量</li>
</ul>
</li>
<li><strong>Jsp/Servlet</strong><ul>
<li>是基于Java语言的</li>
<li>可以承载三高问题：高并发，高性能，高可用</li>
<li>语法与ASP相似</li>
</ul>
</li>
</ul>
<h2 id="2-2、web服务器与web应用服务器"><a href="#2-2、web服务器与web应用服务器" class="headerlink" title="2.2、web服务器与web应用服务器"></a>2.2、web服务器与web应用服务器</h2><p>web服务器干嘛的？由上述流程图可以看到，是用来处理用户的一些请求，给用户响应信息的。</p>
<p>web服务器分为2类：</p>
<ul>
<li>　　web服务器，如：</li>
</ul>
<p>　　　　Apache服务器</p>
<p>　　　　Nginx</p>
<p>　　　　IIS</p>
<ul>
<li>web应用服务器，如</li>
</ul>
<p>　　　　Tomcat</p>
<p>　　　　resin</p>
<p>　　　　jetty</p>
<p>区分：web服务器不能解析jsp等页面，只能处理js、css、html等静态资源</p>
<p>并发：web服务器的并发能力远高于web应用服务器</p>
<h1 id="3、Tomcat"><a href="#3、Tomcat" class="headerlink" title="3、Tomcat"></a>3、Tomcat</h1><p><strong>引言/介绍</strong></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E5%9B%BE%E6%A0%87.png" alt="image-20200730163105323"></p>
<ul>
<li><p>Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，由<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Apache/6265">Apache</a>、Sun 和其他一些公司及个人共同开发而成。由于有了Sun 的参与和支持，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现，Tomcat 5支持最新的Servlet 2.4 和JSP 2.0 规范。因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p>
<p>Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级<strong>应用<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/服务器">服务器</a></strong>，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。<strong>对于一个初学者来说，可以这样认为，当在一台机器上配置好Apache 服务器，可利用它响应<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/HTML">HTML</a>（<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/标准通用标记语言/6805073">标准通用标记语言</a>下的一个应用）页面的访问请求。</strong>实际上Tomcat是Apache 服务器的扩展，但运行时它是独立运行的，所以当你运行tomcat 时，它实际上作为一个与Apache 独立的进程单独运行的。</p>
<p><strong>Tomcat 实际上运行JSP 页面和Servlet</strong>。目前Tomcat最新版本为9.0.37</p>
</li>
</ul>
<h2 id="3、1-安装Tomcat"><a href="#3、1-安装Tomcat" class="headerlink" title="3、1 安装Tomcat"></a>3、1 安装Tomcat</h2><p><strong><em>ps：要配置tomcat首先要配置好java的jdk</em></strong></p>
<p>配置java的方法:<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39691535/article/details/95005254">https://blog.csdn.net/weixin_39691535/article/details/95005254</a></p>
<ul>
<li>Tomcat官网：<a target="_blank" rel="noopener" href="https://tomcat.apache.org/download-90.cgi">https://tomcat.apache.org/download-90.cgi</a></li>
<li><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E5%AE%98%E7%BD%91.png" alt="image-20200730165337393"></li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E6%96%87%E4%BB%B6%E5%A4%B9.png" alt="image-20200730165523099"></p>
<h2 id="3、2-启动Tomcat"><a href="#3、2-启动Tomcat" class="headerlink" title="3、2 启动Tomcat"></a>3、2 启动Tomcat</h2><ul>
<li>文件夹信息作用：</li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png" alt="image-20200730165932307"></p>
<ul>
<li><p>启动，关闭:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917194602322.png" alt="image-20200917194602322"></p>
</li>
</ul>
<p>启动startup.bath后，浏览器搜索 “localhost:8080” 出现以下页面说明访问成功了：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E6%88%90%E5%8A%9F%E5%90%AF%E5%8A%A8.png" alt="image-20200731214723755"></p>
<h2 id="3、3-配置Tomcat"><a href="#3、3-配置Tomcat" class="headerlink" title="3、3 配置Tomcat"></a>3、3 配置Tomcat</h2><p>!(JavaWeb.assets/image-20200731215434250.png)</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%20index%E9%A1%B5%E9%9D%A2.png" alt="image-20200731221117828"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%20server.png" alt="image-20200731221813300"></p>
<p>这个Server.xml 文件是服务器核心配置文件 下面是其中文件内一部分</p>
<ul>
<li><p>作用:</p>
<ul>
<li>配置启动的端口号<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E7%AB%AF%E5%8F%A3.png" alt="image-20200731221940483"><ul>
<li>ps：tomcat默认端口号:8080</li>
<li>mysql默认端口号：3306</li>
<li>http默认端口号：80</li>
<li>https默认端口号：443</li>
</ul>
</li>
<li>配置主机的名字<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/Tomcat%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF.png" alt="image-20200731222208898"><ul>
<li>默认的主机名字:localhost == 127.0.0.1 (可以在hosts文件中找到)</li>
<li>默认网站应用存放位置为：webapps</li>
</ul>
</li>
<li>IP地址和端口的关系:<ul>
<li>简单理解：IP就是一个电脑节点的网络物理地址，就像你的家住的那个地址；端口是该计算机逻辑通讯接口，不同的应用程序用不同的端口，就像你家里的各个不同的房间，卧室用来睡觉，餐厅用来吃饭。</li>
</ul>
</li>
</ul>
</li>
<li><p>由此 我们可以解答一个疑问了:<strong>究竟网站是如何被访问的呢</strong>？</p>
<ul>
<li><p>第一步：输入一个域名，enter；</p>
</li>
<li><p>第二步：检查本机中 hosts配置文件 中是否含有这个域名映射；</p>
<ul>
<li><p>有：直接返回对应的ip地址 前者为ip地址 后者是域名，而我们ip地址中含有webapps 因此可以访问</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#	127.0.0.1       localhost</span><br></pre></td></tr></table></figure>
</li>
<li><p>没有：去DNS服务器中找 DNS服务器≠本机 ，DNS通过解析把域名解析成ip 然后返回给客户端 让我们可以访问了。（其中还有交换机一类的进行处理，省略了）<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917194706889.png" alt="image-20200917194706889"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>简而言之：</p>
<pre><code>1、输入域名，域名解析(域名解析器 DNS)
2、向服务器发送http请求
3、传输层TCP协议，经过网络传输和路由解析
4、WEB服务器接收HTTP请求
5、服务器处理请求内容，并进行必要的数据交换
6、将相应的内容发回给客户端(响应)
7、浏览器解析HTML
8、显示解析好的内容</code></pre></li>
</ul>
<h2 id="3、4-引申-发布一个web网站"><a href="#3、4-引申-发布一个web网站" class="headerlink" title="3、4 引申-发布一个web网站"></a>3、4 引申-发布一个web网站</h2><ul>
<li>把自己写的网站放在服务器（此处为Tomcat）中指定的web应用文件夹（此处为webapps）下即可</li>
</ul>
<p>网站结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">--webapps：Tomcat服务器的web目录</span><br><span class="line">       - ROOT</span><br><span class="line">       - XXXX,网站目录名 也就是我们所写的网站</span><br><span class="line">           - WEB-INF</span><br><span class="line">              -classes：java程序</span><br><span class="line">              -lib：web应用所依赖jar包</span><br><span class="line">              -web.xml：网站配置文件</span><br><span class="line">           - index.jsp/index.html 默认首页</span><br><span class="line">           - static</span><br><span class="line">               -css</span><br><span class="line">                 - style.css</span><br><span class="line">               -js</span><br><span class="line">               -img</span><br><span class="line">       - ...    </span><br></pre></td></tr></table></figure>

<h1 id="4、HTTP"><a href="#4、HTTP" class="headerlink" title="4、HTTP"></a>4、HTTP</h1><h2 id="4、1-什么是HTTP"><a href="#4、1-什么是HTTP" class="headerlink" title="4、1 什么是HTTP"></a>4、1 什么是HTTP</h2><p>HTTP (<strong>超文本传输协议</strong>）是一个简单的请求-响应协议，它通常运行在TCP之上。</p>
<ol>
<li>文本：字符串, xxx.html</li>
<li>超文本：有链接文本</li>
<li>端口号：80</li>
</ol>
<p>HTTPs (其中的s表示security 安全)</p>
<ol>
<li>是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/身份认证/5294713">身份认证</a>保证了传输过程的安全性</li>
<li>端口号：443</li>
</ol>
<h2 id="4、2-HTTP的两个时代"><a href="#4、2-HTTP的两个时代" class="headerlink" title="4、2 HTTP的两个时代"></a>4、2 HTTP的两个时代</h2><ul>
<li>http1.0：</li>
<li>http1.1：</li>
</ul>
<h2 id="4、3-HTTP请求"><a href="#4、3-HTTP请求" class="headerlink" title="4、3 HTTP请求"></a>4、3 HTTP请求</h2><p>ps：用Chrome浏览器如果F12发现看不到数据的话需要再按一下F5刷新</p>
<ul>
<li><p>请求：客户端 → 发送请求 → 服务器</p>
</li>
<li><p>请求报文由三部分组成：<strong><em>请求行+请求头+请求体</em></strong></p>
</li>
<li><p>以百度为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">General:</span><br><span class="line">Request URL: https:<span class="comment">//www.baidu.com/  请求地址</span></span><br><span class="line">Request Method: GET   请求方法：GET方法/POST方法</span><br><span class="line">Status Code: <span class="number">200</span> OK  状态码：<span class="number">200</span></span><br><span class="line">Remote（远程） Address: <span class="number">182.61</span><span class="number">.200</span><span class="number">.6</span>:<span class="number">443</span> 服务器及其端口号</span><br><span class="line">Referrer Policy: no-referrer-when-downgrade 协议</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="http://www.2cto.com/uploadfile/Collfiles/20160921/20160921092902556.jpg" alt="HTTP请求报文"></p>
<h3 id="1、-请求行"><a href="#1、-请求行" class="headerlink" title="1、 请求行"></a>1、 请求行</h3><ul>
<li><p>请求行由①②③组成</p>
</li>
<li><p>请求行方式:<strong>Get Post</strong>（PUT\DELETE\HEAD\TRANSE..）后面是Rest风格的</p>
<ul>
<li>Get：可携带参数少，大小受限，浏览器URL栏内显示提交数据，不安全，但高效</li>
<li>Post：可携带参数多，大小不受限，浏览器URL栏内不显示提交数据，安全，但不高效</li>
</ul>
</li>
</ul>
<h3 id="2、-HTTP-Request-headers-消息头（请求头）"><a href="#2、-HTTP-Request-headers-消息头（请求头）" class="headerlink" title="2、 HTTP Request headers - 消息头（请求头）"></a>2、 HTTP Request headers - 消息头（请求头）</h3><ul>
<li>请求头由④组成</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Resquest <span class="title">Headers</span><span class="params">(请求头/消息头)</span>:</span></span><br><span class="line"><span class="function">Accept: text/html          告诉服务器，所支持数据类型</span></span><br><span class="line"><span class="function">Accept-Encoding: gzip, deflate, br 编码 → 浏览器告诉服务器，支持哪种编码格式</span></span><br><span class="line"><span class="function">Accept-Language: zh-CN,zh</span>;q=<span class="number">0.9</span>,zh-TW;q=<span class="number">0.8</span>,en-US;q=<span class="number">0.7</span>,en;q=<span class="number">0.6</span> 语言 → 支持哪种语言</span><br><span class="line">Cache-Control: max-age=<span class="number">0</span>     缓存控制 → 用来指定当前请求是否使用缓存机制</span><br><span class="line">Connection: keep-alive    连接 → 告诉服务器，请求后断开还是连接</span><br></pre></td></tr></table></figure>

<p>*<em>常用的请求头 *</em></p>
<ul>
<li>格式为 属性名：属性值</li>
</ul>
<table>
<thead>
<tr>
<th><strong>协议头</strong></th>
<th><strong>说明</strong></th>
<th><strong>示例</strong></th>
<th align="left"><strong>状态</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Accept</td>
<td>可接受的响应内容类型（<code>Content-Types</code>）。</td>
<td>Accept: text/plain</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Accept-Charset</td>
<td>可接受的字符集</td>
<td>Accept-Charset: utf-8</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Accept-Encoding</td>
<td>可接受的响应内容的编码方式。</td>
<td>Accept-Encoding: gzip, deflate</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Accept-Language</td>
<td>可接受的响应内容语言列表。</td>
<td>Accept-Language: en-US</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Accept-Datetime</td>
<td>可接受的按照时间来表示的响应内容版本</td>
<td>Accept-Datetime: Sat, 26 Dec 2015 17:30:00 GMT</td>
<td align="left">临时</td>
</tr>
<tr>
<td>Authorization</td>
<td>用于表示HTTP协议中需要认证资源的认证信息</td>
<td>Authorization: Basic OSdjJGRpbjpvcGVuIANlc2SdDE==</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>用来指定当前的请求/回复中的，是否使用缓存机制。</td>
<td>Cache-Control: no-cache</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Connection</td>
<td>客户端（浏览器）想要优先使用的连接类型</td>
<td>Connection: keep-alive Connection: Upgrade</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Cookie</td>
<td>由之前服务器通过<code>Set-Cookie</code>（见下文）设置的一个HTTP协议Cookie</td>
<td>Cookie: $Version=1; Skin=new;</td>
<td align="left">固定：标准</td>
</tr>
<tr>
<td>Content-Length</td>
<td>以8进制表示的请求体的长度</td>
<td>Content-Length: 348</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>请求体的内容的二进制 MD5 散列值（数字签名），以 Base64 编码的结果</td>
<td>Content-MD5: oD8dH2sgSW50ZWdyaIEd9D==</td>
<td align="left">废弃</td>
</tr>
<tr>
<td>Content-Type</td>
<td>请求体的MIME类型 （用于POST和PUT请求中）</td>
<td>Content-Type: application/x-www-form-urlencoded</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Date</td>
<td>发送该消息的日期和时间（以<a target="_blank" rel="noopener" href="http://tools.ietf.org/html/rfc7231#section-7.1.1.1">RFC 7231</a>中定义的”HTTP日期”格式来发送）</td>
<td>Date: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Expect</td>
<td>表示客户端要求服务器做出特定的行为</td>
<td>Expect: 100-continue</td>
<td align="left">固定</td>
</tr>
<tr>
<td>From</td>
<td>发起此请求的用户的邮件地址</td>
<td>From: <a href="mailto:user@itbilu.com">user@itbilu.com</a></td>
<td align="left">固定</td>
</tr>
<tr>
<td>Host</td>
<td>表示服务器的域名以及服务器所监听的端口号。如果所请求的端口是对应的服务的标准端口（80），则端口号可以省略。</td>
<td>Host: <a target="_blank" rel="noopener" href="http://www.itbilu.com:80">www.itbilu.com:80</a> Host: <a target="_blank" rel="noopener" href="http://www.itbilu.com">www.itbilu.com</a></td>
<td align="left">固定</td>
</tr>
<tr>
<td>If-Match</td>
<td>仅当客户端提供的实体与服务器上对应的实体相匹配时，才进行对应的操作。主要用于像 PUT 这样的方法中，仅当从用户上次更新某个资源后，该资源未被修改的情况下，才更新该资源。</td>
<td>If-Match: “9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td align="left">固定</td>
</tr>
<tr>
<td>If-Modified-Since</td>
<td>允许在对应的资源未被修改的情况下返回304未修改</td>
<td>If-Modified-Since: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td align="left">固定</td>
</tr>
<tr>
<td>If-None-Match</td>
<td>允许在对应的内容未被修改的情况下返回304未修改（ 304 Not Modified ），参考 超文本传输协议 的实体标记</td>
<td>If-None-Match: “9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td align="left">固定</td>
</tr>
<tr>
<td>If-Range</td>
<td>如果该实体未被修改过，则向返回所缺少的那一个或多个部分。否则，返回整个新的实体</td>
<td>If-Range: “9jd00cdj34pss9ejqiw39d82f20d0ikd”</td>
<td align="left">固定</td>
</tr>
<tr>
<td>If-Unmodified-Since</td>
<td>仅当该实体自某个特定时间以来未被修改的情况下，才发送回应。</td>
<td>If-Unmodified-Since: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Max-Forwards</td>
<td>限制该消息可被代理及网关转发的次数。</td>
<td>Max-Forwards: 10</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Origin</td>
<td>发起一个针对<a target="_blank" rel="noopener" href="http://itbilu.com/javascript/js/VkiXuUcC.html">跨域资源共享</a>的请求（该请求要求服务器在响应中加入一个<code>Access-Control-Allow-Origin</code>的消息头，表示访问控制所允许的来源）。</td>
<td>Origin: <a target="_blank" rel="noopener" href="http://www.itbilu.com">http://www.itbilu.com</a></td>
<td align="left">固定: 标准</td>
</tr>
<tr>
<td>Pragma</td>
<td>与具体的实现相关，这些字段可能在请求/回应链中的任何时候产生。</td>
<td>Pragma: no-cache</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Proxy-Authorization</td>
<td>用于向代理进行认证的认证信息。</td>
<td>Proxy-Authorization: Basic IOoDZRgDOi0vcGVuIHNlNidJi2==</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Range</td>
<td>表示请求某个实体的一部分，字节偏移以0开始。</td>
<td>Range: bytes=500-999</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Referer</td>
<td>表示浏览器所访问的前一个页面，可以认为是之前访问页面的链接将浏览器带到了当前页面。<code>Referer</code>其实是<code>Referrer</code>这个单词，但RFC制作标准时给拼错了，后来也就将错就错使用<code>Referer</code>了。</td>
<td>Referer: <a target="_blank" rel="noopener" href="http://itbilu.com/nodejs">http://itbilu.com/nodejs</a></td>
<td align="left">固定</td>
</tr>
<tr>
<td>TE</td>
<td>浏览器预期接受的传输时的编码方式：可使用回应协议头<code>Transfer-Encoding</code>中的值（还可以使用”trailers”表示数据传输时的分块方式）用来表示浏览器希望在最后一个大小为0的块之后还接收到一些额外的字段。</td>
<td>TE: trailers,deflate</td>
<td align="left">固定</td>
</tr>
<tr>
<td>User-Agent</td>
<td>浏览器的身份标识字符串</td>
<td>User-Agent: Mozilla/……</td>
<td align="left"></td>
</tr>
<tr>
<td>Upgrade</td>
<td>要求服务器升级到一个高版本协议。</td>
<td>Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Via</td>
<td>告诉服务器，这个请求是由哪些代理发出的。</td>
<td>Via: 1.0 fred, 1.1 itbilu.com.com (Apache/1.1)</td>
<td align="left">固定</td>
</tr>
<tr>
<td>Warning</td>
<td>一个一般性的警告，表示在实体内容体中可能存在错误。</td>
<td>Warning: 199 Miscellaneous warning</td>
<td align="left">固定</td>
</tr>
</tbody></table>
<h3 id="3、-请求体"><a href="#3、-请求体" class="headerlink" title="3、 请求体"></a>3、 请求体</h3><ul>
<li><p>请求体由⑤组成</p>
</li>
<li><p>这个就是我们要上传的实质数据，比如：name=apple&amp;password=123456</p>
</li>
</ul>
<h2 id="4、4-HTTP响应"><a href="#4、4-HTTP响应" class="headerlink" title="4、4 HTTP响应"></a>4、4 HTTP响应</h2><ul>
<li><p>响应：服务器 → 做出回应 → 客户端</p>
</li>
<li><p>响应报文一般由三部分组成：<strong><em>响应行、响应头、响应体</em></strong></p>
</li>
<li><p>以百度为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response Headers:</span><br><span class="line">Cache-Control: <span class="keyword">private</span>        缓存控制</span><br><span class="line">Connection: keep-alive        连接</span><br><span class="line">Content-Encoding: gzip        编码</span><br><span class="line">Content-Type: text/html;charset=utf-<span class="number">8</span> 类型</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="http://www.2cto.com/uploadfile/Collfiles/20160921/20160921092902557.jpg" alt="HTTP响应报文"></p>
<h3 id="1、-响应行"><a href="#1、-响应行" class="headerlink" title="1、 响应行"></a>1、 响应行</h3><ul>
<li><p>由①和②组成，其中①是报文协议和版本；②是状态码及状态描述</p>
<ul>
<li><p>状态码：</p>
<table>
<thead>
<tr>
<th>状态码</th>
<th>定义</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1XX</td>
<td>信息</td>
<td>接收到请求，继续处理</td>
</tr>
<tr>
<td>2XX</td>
<td>成功</td>
<td>操作成功地收到，理解和接受</td>
</tr>
<tr>
<td>3XX</td>
<td>重定向</td>
<td>为了完成请求，必须采取进一步措施</td>
</tr>
<tr>
<td>4XX</td>
<td>客户端错误</td>
<td>请求的语法有错误，或者不能完全被满足，请求错误，责任在客户端，比如客户端请求了一个不存在的资源，或者客户端未被授权，禁止访问</td>
</tr>
<tr>
<td>5XX</td>
<td>服务端错误</td>
<td>服务器无法完成明显有效地请求，服务端抛出异常，比如路由出错，HTTP版本不支持等</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h3 id="2、-响应头"><a href="#2、-响应头" class="headerlink" title="2、 响应头"></a>2、 响应头</h3><ul>
<li><p>由③组成 格式为 属性名：属性值</p>
</li>
<li><table>
<thead>
<tr>
<th>响应头</th>
<th>说明</th>
<th>实例</th>
<th>状态</th>
</tr>
</thead>
<tbody><tr>
<td>Access-Control-Allow-Origin</td>
<td>指定哪些网站可以<code>跨域源资源共享</code></td>
<td>Access-Control-Allow-Origin: *</td>
<td>临时</td>
</tr>
<tr>
<td>Accept-Patch</td>
<td>指定服务器所支持的文档补丁格式</td>
<td>Accept-Patch: text/example;charset=utf-8</td>
<td>固定</td>
</tr>
<tr>
<td>Accept-Ranges</td>
<td>服务器所支持的内容范围</td>
<td>Accept-Ranges: bytes</td>
<td>固定</td>
</tr>
<tr>
<td>Age</td>
<td>响应对象在代理缓存中存在的时间，以秒为单位</td>
<td>Age: 12</td>
<td>固定</td>
</tr>
<tr>
<td>Allow</td>
<td>对于特定资源的有效动作;</td>
<td>Allow: GET, HEAD</td>
<td>固定</td>
</tr>
<tr>
<td>Cache-Control</td>
<td>通知从服务器到客户端内的所有缓存机制，表示它们是否可以缓存这个对象及缓存有效时间。其单位为秒</td>
<td>Cache-Control: max-age=3600</td>
<td>固定</td>
</tr>
<tr>
<td>Connection</td>
<td>针对该连接所预期的选项</td>
<td>Connection: close</td>
<td>固定</td>
</tr>
<tr>
<td>Content-Disposition</td>
<td>对已知MIME类型资源的描述，浏览器可以根据这个响应头决定是对返回资源的动作，如：将其下载或是打开。</td>
<td>Content-Disposition: attachment; filename=”fname.ext”</td>
<td>固定</td>
</tr>
<tr>
<td>Content-Encoding</td>
<td>响应资源所使用的编码类型。</td>
<td>Content-Encoding: gzip</td>
<td>固定</td>
</tr>
<tr>
<td>Content-Language</td>
<td>响就内容所使用的语言</td>
<td>Content-Language: zh-cn</td>
<td>固定</td>
</tr>
<tr>
<td>Content-Length</td>
<td>响应消息体的长度，用8进制字节表示</td>
<td>Content-Length: 348</td>
<td>固定</td>
</tr>
<tr>
<td>Content-Location</td>
<td>所返回的数据的一个候选位置</td>
<td>Content-Location: /index.htm</td>
<td>固定</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>响应内容的二进制 MD5 散列值，以 Base64 方式编码</td>
<td>Content-MD5: IDK0iSsgSW50ZWd0DiJUi==</td>
<td>已淘汰</td>
</tr>
<tr>
<td>Content-Range</td>
<td>如果是响应部分消息，表示属于完整消息的哪个部分</td>
<td>Content-Range: bytes 21010-47021/47022</td>
<td>固定</td>
</tr>
<tr>
<td>Content-Type</td>
<td>当前内容的<code>MIME</code>类型</td>
<td>Content-Type: text/html; charset=utf-8</td>
<td>固定</td>
</tr>
<tr>
<td>Date</td>
<td>此条消息被发送时的日期和时间(以<a target="_blank" rel="noopener" href="http://tools.ietf.org/html/rfc7231#section-7.1.1.1">RFC 7231</a>中定义的”HTTP日期”格式来表示)</td>
<td>Date: Tue, 15 Nov 1994 08:12:31 GMT</td>
<td>固定</td>
</tr>
<tr>
<td>ETag</td>
<td>对于某个资源的某个特定版本的一个标识符，通常是一个 消息散列</td>
<td>ETag: “737060cd8c284d8af7ad3082f209582d”</td>
<td>固定</td>
</tr>
<tr>
<td>Expires</td>
<td>指定一个日期/时间，超过该时间则认为此回应已经过期</td>
<td>Expires: Thu, 01 Dec 1994 16:00:00 GMT</td>
<td>固定</td>
</tr>
<tr>
<td>Last-Modified</td>
<td>所请求的对象的最后修改日期(按照 RFC 7231 中定义的“超文本传输协议日期”格式来表示)</td>
<td>Last-Modified: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td>固定</td>
</tr>
<tr>
<td>Link</td>
<td>用来表示与另一个资源之间的类型关系，此类型关系是在<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc5988">RFC 5988</a>中定义</td>
<td><code>Link:</code>; rel=”alternate”</td>
<td>固定</td>
</tr>
<tr>
<td>Location</td>
<td>用于在进行重定向，或在创建了某个新资源时使用。</td>
<td>Location: <a target="_blank" rel="noopener" href="http://www.itbilu.com/nodejs">http://www.itbilu.com/nodejs</a></td>
<td>固定</td>
</tr>
<tr>
<td>P3P</td>
<td>P3P策略相关设置</td>
<td>P3P: CP=”This is not a P3P policy!</td>
<td>固定</td>
</tr>
<tr>
<td>Pragma</td>
<td>与具体的实现相关，这些响应头可能在请求/回应链中的不同时候产生不同的效果</td>
<td>Pragma: no-cache</td>
<td>固定</td>
</tr>
<tr>
<td>Proxy-Authenticate</td>
<td>要求在访问代理时提供身份认证信息。</td>
<td>Proxy-Authenticate: Basic</td>
<td>固定</td>
</tr>
<tr>
<td>Public-Key-Pins</td>
<td>用于防止中间攻击，声明网站认证中传输层安全协议的证书散列值</td>
<td>Public-Key-Pins: max-age=2592000; pin-sha256=”……”;</td>
<td>固定</td>
</tr>
<tr>
<td>Refresh</td>
<td>用于重定向，或者当一个新的资源被创建时。默认会在5秒后刷新重定向。</td>
<td>Refresh: 5; url=<a target="_blank" rel="noopener" href="http://itbilu.com">http://itbilu.com</a></td>
<td>固定</td>
</tr>
<tr>
<td>Retry-After</td>
<td>如果某个实体临时不可用，那么此协议头用于告知客户端稍后重试。其值可以是一个特定的时间段(以秒为单位)或一个超文本传输协议日期。</td>
<td>示例1:Retry-After: 120   示例2: Retry-After: Dec, 26 Dec 2015 17:30:00 GMT</td>
<td>固定</td>
</tr>
<tr>
<td>Server</td>
<td>服务器的名称</td>
<td>Server: nginx/1.6.3</td>
<td>固定</td>
</tr>
<tr>
<td>Set-Cookie</td>
<td>设置<code>HTTP cookie</code></td>
<td>Set-Cookie: UserID=itbilu; Max-Age=3600; Version=1</td>
<td>固定: 标准</td>
</tr>
<tr>
<td>Status</td>
<td>通用网关接口的响应头字段，用来说明当前HTTP连接的响应状态。</td>
<td>Status: 200 OK</td>
<td></td>
</tr>
<tr>
<td>Trailer</td>
<td><code>Trailer</code>用户说明传输中分块编码的编码信息</td>
<td>Trailer: Max-Forwards</td>
<td>固定</td>
</tr>
<tr>
<td>Transfer-Encoding</td>
<td>用表示实体传输给用户的编码形式。包括：<code>chunked</code>、<code>compress</code>、 <code>deflate</code>、<code>gzip</code>、<code>identity</code>。</td>
<td>Transfer-Encoding: chunked</td>
<td>固定</td>
</tr>
<tr>
<td>Upgrade</td>
<td>要求客户端升级到另一个高版本协议。</td>
<td>Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11</td>
<td>固定</td>
</tr>
<tr>
<td>Vary</td>
<td>告知下游的代理服务器，应当如何对以后的请求协议头进行匹配，以决定是否可使用已缓存的响应内容而不是重新从原服务器请求新的内容。</td>
<td>Vary: *</td>
<td>固定</td>
</tr>
<tr>
<td>Via</td>
<td>告知代理服务器的客户端，当前响应是通过什么途径发送的。</td>
<td>Via: 1.0 fred, 1.1 itbilu.com (nginx/1.6.3)</td>
<td>固定</td>
</tr>
<tr>
<td>Warning</td>
<td>一般性警告，告知在实体内容体中可能存在错误。</td>
<td>Warning: 199 Miscellaneous warning</td>
<td>固定</td>
</tr>
<tr>
<td>WWW-Authenticate</td>
<td>表示在请求获取这个实体时应当使用的认证模式。</td>
<td>WWW-Authenticate: Basic</td>
<td>固定</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="3、-响应体"><a href="#3、-响应体" class="headerlink" title="3、 响应体"></a>3、 响应体</h3><ul>
<li>由⑥组成</li>
<li>是服务器返回给客户端的文本信息</li>
</ul>
<h1 id="5、-Maven"><a href="#5、-Maven" class="headerlink" title="5、 Maven"></a>5、 Maven</h1><ol>
<li>由于在javaweb开发中我们需要用到jar包，但我们每次手动去添加会不会太麻烦了？</li>
<li>因此，我们有了Maven来帮我们自动导入jar包并配置</li>
</ol>
<h2 id="5、1-Maven项目架构管理工具"><a href="#5、1-Maven项目架构管理工具" class="headerlink" title="5、1 Maven项目架构管理工具"></a>5、1 Maven项目架构管理工具</h2><ul>
<li>maven核心思想：约定大于配置</li>
<li>maven规定了如何写java代码，不能违反规范</li>
</ul>
<h2 id="5、2-Maven下载"><a href="#5、2-Maven下载" class="headerlink" title="5、2 Maven下载"></a>5、2 Maven下载</h2><p>官网:<a target="_blank" rel="noopener" href="https://maven.apache.org/">https://maven.apache.org/</a></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200813153434784.png" alt="image-20200813153434784"></p>
<h2 id="5、3-Maven配置环境变量"><a href="#5、3-Maven配置环境变量" class="headerlink" title="5、3 Maven配置环境变量"></a>5、3 Maven配置环境变量</h2><ul>
<li><p>在“此电脑”的高级环境变量中配置如下几项内容</p>
<ol>
<li>新建系统变量 MAVEN_HOME 变量值：maven的目录</li>
<li>新建系统变量 M2_HOME 变量值：maven的lib目录</li>
<li>编辑系统变量Path 添加变量值： ;%MAVEN_HOME%\bin</li>
</ol>
</li>
<li><p>假如在cmd中查看mvn版本能出现以下情况，则为配置成功：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200813214029651.png" alt="image-20200813214029651"></p>
</li>
</ul>
<h2 id="5、4-阿里云镜像"><a href="#5、4-阿里云镜像" class="headerlink" title="5、4 阿里云镜像"></a>5、4 阿里云镜像</h2><p>镜像mirrors 用于加速我们下载</p>
<ul>
<li><p>常用 阿里云镜像：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>放置于：setting.xml中<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200814161829870.png" alt="image-20200814161829870"></p>
</li>
</ul>
<h2 id="5、5-本地仓库"><a href="#5、5-本地仓库" class="headerlink" title="5、5 本地仓库"></a>5、5 本地仓库</h2><p>远程仓库：github</p>
<p>本体仓库：localRepository</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>C:\Users\60446\Desktop\学习文件\environment\apache-maven-3.6.3\maven-repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5、6-在IDEA中使用Maven"><a href="#5、6-在IDEA中使用Maven" class="headerlink" title="5、6 在IDEA中使用Maven"></a>5、6 在IDEA中使用Maven</h2><ol>
<li><p>启动IDEA</p>
</li>
<li><p>创建一个Maven Web项目<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200815190802551.png" alt="image-20200815190802551">)<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200816141500367.png" alt="image-20200816141500367">)<img src="/UesugiEr11.github.io/2020/10/01/JavaWeb/C:%5CUsers%5C60446%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200816160644275.png" alt="image-20200816160644275"></p>
</li>
<li><p>如果是第一次配置的话 要等待下载响应配置 出现下图则搭建成功<img src="/UesugiEr11.github.io/2020/10/01/JavaWeb/C:%5CUsers%5C60446%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200816163147833.png" alt="image-20200816163147833"></p>
</li>
<li><p>IDEA中Maven配置</p>
<p>ps:IDEA中配置Maven项目，Maven home会使用IDEA自带的两个版本之一，因此需要我们手动去替换，很重要!!!否则在后续创建maven项目的时候很有可能会没有src目录，这是很深刻的教训！<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200817181118677.png" alt="image-20200817181118677"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200817181831967.png" alt="image-20200817181831967"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200817183452695.png" alt="image-20200817183452695"></p>
<p>有webapp模板的maven文件：</p>
<p>WEB-INF+web.xml ：Web的配置</p>
<p>index.jsp 网页</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906180606170.png" alt="image-20200906180606170"></p>
</li>
</ol>
<h2 id="5、7-创建普通的Maven项目"><a href="#5、7-创建普通的Maven项目" class="headerlink" title="5、7 创建普通的Maven项目"></a>5、7 创建普通的Maven项目</h2><p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906180055017.png" alt="image-20200906180055017"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906180228323.png" alt="image-20200906180228323"></p>
<p>一个干净的maven项目：</p>
<p>蓝色java：放置java源代码</p>
<p>resource：放置配置文件</p>
<p>绿色java：测试使用</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906180429074.png" alt="image-20200906180429074"></p>
<h2 id="5、8-标记文件夹功能"><a href="#5、8-标记文件夹功能" class="headerlink" title="5、8 标记文件夹功能"></a>5、8 标记文件夹功能</h2><p>Sources Root：源码目录</p>
<p>Test Sources Root：测试源码目录</p>
<p>Resources Root：资源目录</p>
<p>Test Resources Root：资源测试目录</p>
<ul>
<li><p>标记方法1：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906181630896.png" alt="![image-20200906182232614](https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906182232614.png)"></p>
</li>
<li><p>标记方法2：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906182543087.png" alt="image-20200906182543087"></p>
</li>
</ul>
<h2 id="5、9-在IDEA中配置Tomcat"><a href="#5、9-在IDEA中配置Tomcat" class="headerlink" title="5、9 在IDEA中配置Tomcat"></a>5、9 在IDEA中配置Tomcat</h2><p>前序工作，选中项目：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200907212946486.png" alt="image-20200907212946486"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906205444320.png" alt="image-20200906205444320"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906211324821.png" alt="image-20200906211324821"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906211236188.png" alt="image-20200906211236188"></p>
<p>为什么会有这个Warning呢？因为我们访问一个网站需要指定一个文件夹的名字</p>
<p>Warning的解决方案：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906212405085.png" alt="image-20200906212405085"></p>
<ul>
<li>测试：启动Tomact后出现<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906212533201.png" alt="image-20200906212533201"></li>
</ul>
<h2 id="5、10-POM文件"><a href="#5、10-POM文件" class="headerlink" title="5、10 POM文件"></a>5、10 POM文件</h2><ul>
<li>pom.xml 是maven项目核心</li>
<li><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906213700735.png" alt="image-20200906213700735"></li>
</ul>
<p>如果是webapp的maven项目应该有(暂时）:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906215039422.png" alt="image-20200906215039422"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200906215115986.png" alt="image-20200906215115986"></p>
<p>其中 dependencies中的依赖 我们可以在maven仓库：<a target="_blank" rel="noopener" href="https://mvnrepository.com/中搜索我们需要的依赖">https://mvnrepository.com/中搜索我们需要的依赖</a> 直接复制粘贴过来 maven会帮我们自动导入<strong>jar包</strong>及<strong>该jar包所依赖的其他jar包</strong>这就是maven的高级之处了。</p>
<h2 id="maven资源文件导出问题-解决方法"><a href="#maven资源文件导出问题-解决方法" class="headerlink" title="maven资源文件导出问题 解决方法"></a>maven资源文件导出问题 解决方法</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    .......</span><br><span class="line">      <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">            </span><br></pre></td></tr></table></figure>

<h1 id="6、-Servlet"><a href="#6、-Servlet" class="headerlink" title="6、 Servlet"></a>6、 Servlet</h1><h2 id="6、1-Servlet简介"><a href="#6、1-Servlet简介" class="headerlink" title="6、1 Servlet简介"></a>6、1 Servlet简介</h2><p>Servlet接口有两个默认实现类：HttpServlet 和 GenericServlet</p>
<ul>
<li>servlet是sun公司的开发动态web的一门技术</li>
<li>sun在API中提供一个<strong>接口</strong>叫做servlet，想使用该接口需要完成两个步骤：<ul>
<li>编写一个类，去实现Servlet接口</li>
<li>把开发好的java类部署到web服务器中</li>
</ul>
</li>
</ul>
<p>因此：我们把实现了Servlet接口的【<strong>java程序</strong>】叫做 Servlet程序</p>
<h2 id="6、2-HelloServlet"><a href="#6、2-HelloServlet" class="headerlink" title="6、2 HelloServlet"></a>6、2 HelloServlet</h2><ul>
<li><p>创建一个 普通的Maven项目，删掉其中的src目录，往后在这里建立Moudle（作为父工程）；</p>
</li>
<li><p>关于Maven父子工程理解：</p>
<p>在父项目中会有</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;modules&gt;</span><br><span class="line">        此处子项目叫Son1</span><br><span class="line">        &lt;module&gt;Son1&lt;/module&gt;</span><br><span class="line">&lt;/modules&gt;</span><br></pre></td></tr></table></figure>

<p>在子项目中会有</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">        &lt;artifactId&gt;Servlet&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;groupId&gt;com.HPG&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;version&gt;1.0-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure>

<p>父项目中jar包子项目可以直接使用</p>
</li>
<li><p>编写一个Servle程序</p>
<ol>
<li><p>编写一个普通类</p>
</li>
<li><p>实现Servlet接口，需要extends的是HttpServlet</p>
<p>逻辑关系图：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200907183432874.png" alt="image-20200907183432874"></p>
<p>源码分析:</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Servlet.class:</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest var1, ServletResponse var2)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GenericServlet.class:</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span>, <span class="title">ServletConfig</span>, <span class="title">Serializable</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">GenericServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">HTTPServlet.class:</span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String protocol = req.getProtocol();</span><br><span class="line">        String msg = lStrings.getString(<span class="string">&quot;http.method_get_not_supported&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (protocol.endsWith(<span class="string">&quot;1.1&quot;</span>)) &#123;</span><br><span class="line">            resp.sendError(<span class="number">405</span>, msg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.sendError(<span class="number">400</span>, msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String protocol = req.getProtocol();</span><br><span class="line">        String msg = lStrings.getString(<span class="string">&quot;http.method_post_not_supported&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (protocol.endsWith(<span class="string">&quot;1.1&quot;</span>)) &#123;</span><br><span class="line">            resp.sendError(<span class="number">405</span>, msg);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.sendError(<span class="number">400</span>, msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">HelloServlet.java:</span><br><span class="line">public class HelloServlet extends HttpServlet &#123;</span><br><span class="line">protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        PrintWriter writer &#x3D; resp.getWriter();</span><br><span class="line">        writer.print(&quot;Hello!Servlet&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
</li>
<li><p>编写Servlet的映射</p>
<ul>
<li><p>为什么需要映射？因为我们写的是java程序，但需要通过浏览器访问，浏览器又需要连接web服务器，因此我们需要在web服务器中注册我们写的Servlet，并需要给web服务器一个浏览器能够访问的路径。这就叫映射。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册Servlet--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.HPG.Servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--Servlet的请求路径--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>





</li>
</ul>
</li>
</ul>
<ul>
<li><p>配置Tomcat</p>
<p>ps:注意项目发布路径（/xxxx)</p>
</li>
<li><p>启动测试（注意看网址栏的区别）</p>
<p>不用servlet：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200907211734632.png" alt></p>
</li>
</ul>
<p>  <img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200907211032031.png" alt="image-20200907211032031"></p>
<ul>
<li><p>用servlet:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200907211713298.png" alt="image-20200907211713298"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200907211050153.png" alt></p>
</li>
<li><p>注意事项：假如有多个Servlet程序，要记得在Deployment处更换包<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200910163413106.png" alt="image-20200910163413106"></p>
</li>
</ul>
<h2 id="6、3-Servlet原理"><a href="#6、3-Servlet原理" class="headerlink" title="6、3 Servlet原理"></a>6、3 Servlet原理</h2><p> Servlet只有放在容器中，方可执行，且Servlet容器种类较多，如Tomcat,WebLogic等。下图为简单的 请求响应 模型:<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200908200355702.png" alt="image-20200908200355702"></p>
<p>逻辑：</p>
<ol>
<li>浏览器向服务器发出GET请求(请求服务器ServletA)</li>
<li>服务器上的容器逻辑接收到该url,根据该url判断为Servlet请求，此时容器逻辑将产生两个对象：请求对象(HttpServletRequest)和响应对象(HttpServletResponce)</li>
<li>容器逻辑根据url找到目标Servlet(本示例目标Servlet为ServletA),且创建一个线程A</li>
<li>容器逻辑将刚才创建的请求对象和响应对象传递给线程A</li>
<li>容器逻辑调用Servlet的service()方法</li>
<li>service()方法根据请求类型(本示例为GET请求)调用doGet()(本示例调用doGet())或doPost()方法</li>
<li>doGet()执行完后，将结果返回给容器逻辑</li>
<li>线程A被销毁或被放在线程池中</li>
</ol>
<h2 id="6、4-Mapping问题"><a href="#6、4-Mapping问题" class="headerlink" title="6、4 Mapping问题"></a>6、4 Mapping问题</h2><ol>
<li><p>一个Servlet可以指定一个映射路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Servlet的请求路径--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>一个Servlet可以指定多个映射路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Servlet的请求路径--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello2<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello3<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><p>一个Servlet可以指定通用映射路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Servlet的请求路径--&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">  &lt;servlet-name&gt;hello&lt;&#x2F;servlet-name&gt;</span><br><span class="line">  &lt;url-pattern&gt;&#x2F;hello&#x2F;*&lt;&#x2F;url-pattern&gt;</span><br><span class="line">&lt;&#x2F;servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以指定默认请求路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Servlet的请求路径--&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">  &lt;servlet-name&gt;hello&lt;&#x2F;servlet-name&gt;</span><br><span class="line">  &lt;url-pattern&gt;&#x2F;*&lt;&#x2F;url-pattern&gt;</span><br><span class="line">&lt;&#x2F;servlet-mapping&gt;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="5">
<li><p>可以指定通用前缀/后缀路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Servlet的请求路径--&gt;</span><br><span class="line">&lt;!--此时*前面不能加任何东西--&gt;</span><br><span class="line">&lt;servlet-mapping&gt;</span><br><span class="line">  &lt;servlet-name&gt;hello&lt;&#x2F;servlet-name&gt;</span><br><span class="line">  &lt;url-pattern&gt;*.abc&lt;&#x2F;url-pattern&gt;</span><br><span class="line">&lt;&#x2F;servlet-mapping&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>优先级来说的话：是固有映射路径最高，找不到才走默认的</p>
<h2 id="6、5-ServletContext"><a href="#6、5-ServletContext" class="headerlink" title="6、5 ServletContext"></a>6、5 ServletContext</h2><p>web容器（Tomcat）在启动的时候，他会给每个web程序都创建一个对应的Servlet对象，他代表当前的web应用。</p>
<h3 id="ServletContext功能"><a href="#ServletContext功能" class="headerlink" title="ServletContext功能"></a>ServletContext功能</h3><h4 id="1、共享数据"><a href="#1、共享数据" class="headerlink" title="1、共享数据"></a>1、共享数据<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200910163137128.png" alt="image-20200910163137128"></h4><p>举例：我把一个数据存在了ServletContext中，再用 一个Servlet去调用 让我们看看效果<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200910172651611.png" alt="image-20200910172651611"></p>
<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//this.getServletContext();</span></span><br><span class="line">        <span class="comment">//this.getServletConfig();</span></span><br><span class="line">        <span class="comment">//this.getInitParameter();</span></span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String username = <span class="string">&quot;hpg&quot;</span>;</span><br><span class="line">        <span class="comment">//将一个数据保存在了ServletContext中。其中名字为username，值为username（hpg）</span></span><br><span class="line">        context.setAttribute(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200910172711109.png" alt="image-20200910172711109"></p>
<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String username = (String)context.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        resp.getWriter().println(<span class="string">&quot;name:&quot;</span>+username);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>同样的 在web.xml部署路径：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200910172751746.png" alt="image-20200910172751746"></p>
<p>我们先启动hello，再启动GetContext：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200910172822926.png" alt="image-20200910172822926"></p>
<h4 id="2、获取初始化参数"><a href="#2、获取初始化参数" class="headerlink" title="2、获取初始化参数"></a>2、获取初始化参数</h4><p>P1,P2在web.xml中配置</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911201430950.png" alt="image-20200911201430950"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911201443957.png" alt="image-20200911201443957"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911201458232.png" alt="image-20200911201458232"></p>
<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        String url = context.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        resp.getWriter().print(url);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911201508117.png" alt="image-20200911201508117"></p>
<h4 id="3、请求转发"><a href="#3、请求转发" class="headerlink" title="3、请求转发"></a>3、请求转发</h4><p>在web.xml中配置</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911203004955.png" alt="image-20200911203004955"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911203019502.png" alt="image-20200911203019502"></p>
<p>代码：</p>
<p>转发的页面是gp的页面，而转</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo04</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hi ServletDemo04!&quot;</span>);</span><br><span class="line">        ServletContext context = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">//转发的请求路径</span></span><br><span class="line">        RequestDispatcher requestDispatcher = context.getRequestDispatcher(<span class="string">&quot;/gp&quot;</span>);</span><br><span class="line">        <span class="comment">//调用forward实现请求转发</span></span><br><span class="line">        requestDispatcher.forward(req,resp);</span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>发的状态码 200 表示着转发成功</p>
<p>我们虽然请求的是sd4,但实际上我们走的是gp</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911203037054.png" alt="image-20200911203037054"></p>
<h5 id="请求转发和重定向的问题"><a href="#请求转发和重定向的问题" class="headerlink" title="请求转发和重定向的问题"></a>请求转发和重定向的问题</h5><p>首先让我们看一幅图：</p>
<p>A想要获取C的信息，但是无法直接获取，只能通过B去获取C信息，再经由B传给A</p>
<p>自始至终，A都没有访问到C，这就叫<strong>请求转发</strong></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911204258154.png" alt="image-20200911204258154"></p>
<p>再让我们看一幅图：</p>
<p>A想要一个资源，去找B，B说我没有，让A去找C，于是A就去请求C了</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911204905346.png" alt="image-20200911204905346"></p>
<p>（日后再补充）</p>
<h3 id="4、-访问资源文件"><a href="#4、-访问资源文件" class="headerlink" title="4、 访问资源文件"></a>4、 访问资源文件</h3><p>说到资源文件，就不得不提到一个类 “Properties”</p>
<p>在java目录或者是resources目录下 新建xxxx.properties，都会被打包在同一个路径（classes）下，我们称该路径为classpath；</p>
<p>下面我们来演示一下如何访问资源目录</p>
<p>比如，我们在resources目录下创建好了一个db.properties后启动tomcat，我们可以在target/classes目录中发现生成一个db.properties——这是准备工作</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911213217216.png" alt="image-20200911213217216"></p>
<p>db.properties中的内容为：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911213840376.png" alt="image-20200911213840376"></p>
<p>同样的，我们首先在web.xml中配置好映射:<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911213937082.png" alt="image-20200911213937082"></p>
<p>写好了一个关于访问资源文件的Servlet</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911213951172.png" alt="image-20200911213951172"></p>
<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletDemo05</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获得上下文中资源并转成一个流</span></span><br><span class="line">        InputStream ios = <span class="keyword">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/WEB-INF/classes/db.properties&quot;</span>);</span><br><span class="line">        <span class="comment">//生成一个properties对象</span></span><br><span class="line">        Properties prop = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">//用properties中的load方法导入流</span></span><br><span class="line">        prop.load(ios);</span><br><span class="line">        <span class="comment">//拿到properties中的属性</span></span><br><span class="line">        String username = prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="comment">//打印输出</span></span><br><span class="line">        resp.getWriter().print(username+<span class="string">&quot;:&quot;</span>+password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911214024919.png" alt="image-20200911214024919"></p>
<h2 id="6、6-HttpServletResponse"><a href="#6、6-HttpServletResponse" class="headerlink" title="6、6 HttpServletResponse"></a>6、6 HttpServletResponse</h2><p>web服务器接收到客户端的http请求，会针对该请求，分别创建一个代表请求的HttpServletRequest对象和一个代表响应的HttpServletResponse；</p>
<ul>
<li>假如我们要获取客户端请求过来的参数：找HttpServletRequest</li>
<li>假如我们需要给客户端响应一些信息：找HttpServletResponse</li>
</ul>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><h4 id="负责给浏览器发送数据的方法"><a href="#负责给浏览器发送数据的方法" class="headerlink" title="负责给浏览器发送数据的方法"></a>负责给浏览器发送数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在ServletResponse.class中</span></span><br><span class="line"><span class="comment">//写流用这个</span></span><br><span class="line"><span class="function">ServletOutputStream <span class="title">getOutputStream</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"><span class="comment">//写中文一般用这个</span></span><br><span class="line"><span class="function">PrintWriter <span class="title">getWriter</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure>

<h4 id="负责给浏览器发送响应头的方法"><a href="#负责给浏览器发送响应头的方法" class="headerlink" title="负责给浏览器发送响应头的方法"></a>负责给浏览器发送响应头的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在ServletResponse.class中</span></span><br><span class="line"><span class="comment">//确保发往服务器的参数的编码格式</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setCharacterEncoding</span><span class="params">(String var1)</span></span>;</span><br><span class="line"><span class="comment">//设置内容长度</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setContentLength</span><span class="params">(<span class="keyword">int</span> var1)</span></span>;</span><br><span class="line"><span class="comment">//使浏览器区分不同种类数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setContentType</span><span class="params">(String var1)</span></span>;</span><br><span class="line"><span class="comment">//设置每次读取文件流时缓存数组的大小</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setBufferSize</span><span class="params">(<span class="keyword">int</span> var1)</span></span>;</span><br><span class="line"><span class="comment">//在HttpServletResponse.class中</span></span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendError</span><span class="params">(<span class="keyword">int</span> var1, String var2)</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendError</span><span class="params">(<span class="keyword">int</span> var1)</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"><span class="comment">//重定向网页，向浏览器发送一个特殊Header，由浏览器做重定向，转到指定页面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendRedirect</span><span class="params">(String var1)</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line"><span class="comment">//设置指定头名称以及日期</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setDateHeader</span><span class="params">(String var1, <span class="keyword">long</span> var2)</span></span>;</span><br><span class="line"><span class="comment">//添加头名称以及日期</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addDateHeader</span><span class="params">(String var1, <span class="keyword">long</span> var2)</span></span>;</span><br><span class="line"><span class="comment">//设置返回页面的头meta信息，这个可以有很多功能，后期可以自己上网查一下用</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setHeader</span><span class="params">(String var1, String var2)</span></span>;</span><br><span class="line"><span class="comment">//添加返回页面的头meta信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addHeader</span><span class="params">(String var1, String var2)</span></span>;</span><br><span class="line"><span class="comment">//设置http文件头信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setIntHeader</span><span class="params">(String var1, <span class="keyword">int</span> var2)</span></span>;</span><br><span class="line"><span class="comment">//添加http文件头信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addIntHeader</span><span class="params">(String var1, <span class="keyword">int</span> var2)</span></span>;</span><br><span class="line"><span class="comment">//设置状态</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setStatus</span><span class="params">(<span class="keyword">int</span> var1)</span></span>;</span><br></pre></td></tr></table></figure>

<h4 id="响应的状态码"><a href="#响应的状态码" class="headerlink" title="响应的状态码"></a>响应的状态码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> SC_CONTINUE = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> SC_SWITCHING_PROTOCOLS = <span class="number">101</span>;</span><br><span class="line"><span class="keyword">int</span> SC_OK = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">int</span> SC_CREATED = <span class="number">201</span>;</span><br><span class="line"><span class="keyword">int</span> SC_ACCEPTED = <span class="number">202</span>;</span><br><span class="line"><span class="keyword">int</span> SC_NON_AUTHORITATIVE_INFORMATION = <span class="number">203</span>;</span><br><span class="line"><span class="keyword">int</span> SC_NO_CONTENT = <span class="number">204</span>;</span><br><span class="line"><span class="keyword">int</span> SC_RESET_CONTENT = <span class="number">205</span>;</span><br><span class="line"><span class="keyword">int</span> SC_PARTIAL_CONTENT = <span class="number">206</span>;</span><br><span class="line"><span class="keyword">int</span> SC_MULTIPLE_CHOICES = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">int</span> SC_MOVED_PERMANENTLY = <span class="number">301</span>;</span><br><span class="line"><span class="keyword">int</span> SC_MOVED_TEMPORARILY = <span class="number">302</span>;</span><br><span class="line"><span class="keyword">int</span> SC_FOUND = <span class="number">302</span>;</span><br><span class="line"><span class="keyword">int</span> SC_SEE_OTHER = <span class="number">303</span>;</span><br><span class="line"><span class="keyword">int</span> SC_NOT_MODIFIED = <span class="number">304</span>;</span><br><span class="line"><span class="keyword">int</span> SC_USE_PROXY = <span class="number">305</span>;</span><br><span class="line"><span class="keyword">int</span> SC_TEMPORARY_REDIRECT = <span class="number">307</span>;</span><br><span class="line"><span class="keyword">int</span> SC_BAD_REQUEST = <span class="number">400</span>;</span><br><span class="line"><span class="keyword">int</span> SC_UNAUTHORIZED = <span class="number">401</span>;</span><br><span class="line"><span class="keyword">int</span> SC_PAYMENT_REQUIRED = <span class="number">402</span>;</span><br><span class="line"><span class="keyword">int</span> SC_FORBIDDEN = <span class="number">403</span>;</span><br><span class="line"><span class="keyword">int</span> SC_NOT_FOUND = <span class="number">404</span>;</span><br><span class="line"><span class="keyword">int</span> SC_METHOD_NOT_ALLOWED = <span class="number">405</span>;</span><br><span class="line"><span class="keyword">int</span> SC_NOT_ACCEPTABLE = <span class="number">406</span>;</span><br><span class="line"><span class="keyword">int</span> SC_PROXY_AUTHENTICATION_REQUIRED = <span class="number">407</span>;</span><br><span class="line"><span class="keyword">int</span> SC_REQUEST_TIMEOUT = <span class="number">408</span>;</span><br><span class="line"><span class="keyword">int</span> SC_CONFLICT = <span class="number">409</span>;</span><br><span class="line"><span class="keyword">int</span> SC_GONE = <span class="number">410</span>;</span><br><span class="line"><span class="keyword">int</span> SC_LENGTH_REQUIRED = <span class="number">411</span>;</span><br><span class="line"><span class="keyword">int</span> SC_PRECONDITION_FAILED = <span class="number">412</span>;</span><br><span class="line"><span class="keyword">int</span> SC_REQUEST_ENTITY_TOO_LARGE = <span class="number">413</span>;</span><br><span class="line"><span class="keyword">int</span> SC_REQUEST_URI_TOO_LONG = <span class="number">414</span>;</span><br><span class="line"><span class="keyword">int</span> SC_UNSUPPORTED_MEDIA_TYPE = <span class="number">415</span>;</span><br><span class="line"><span class="keyword">int</span> SC_REQUESTED_RANGE_NOT_SATISFIABLE = <span class="number">416</span>;</span><br><span class="line"><span class="keyword">int</span> SC_EXPECTATION_FAILED = <span class="number">417</span>;</span><br><span class="line"><span class="keyword">int</span> SC_INTERNAL_SERVER_ERROR = <span class="number">500</span>;</span><br><span class="line"><span class="keyword">int</span> SC_NOT_IMPLEMENTED = <span class="number">501</span>;</span><br><span class="line"><span class="keyword">int</span> SC_BAD_GATEWAY = <span class="number">502</span>;</span><br><span class="line"><span class="keyword">int</span> SC_SERVICE_UNAVAILABLE = <span class="number">503</span>;</span><br><span class="line"><span class="keyword">int</span> SC_GATEWAY_TIMEOUT = <span class="number">504</span>;</span><br><span class="line"><span class="keyword">int</span> SC_HTTP_VERSION_NOT_SUPPORTED = <span class="number">505</span>;</span><br></pre></td></tr></table></figure>

<h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><h4 id="给浏览器输出各种信息"><a href="#给浏览器输出各种信息" class="headerlink" title="给浏览器输出各种信息"></a>给浏览器输出各种信息</h4><p>几秒刷一次啊 这种的，还有许多，之后再补充8.</p>
<h4 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h4><ol>
<li>要获取下载文件的路径</li>
<li>下载的文件名是什么</li>
<li>让浏览器能够支持下载我们需要的东西</li>
<li>获取下载文件的输入流</li>
<li>创建缓冲区</li>
<li>获取OutputStream对象</li>
<li>将FileOutputStream流写入到buffer缓冲区</li>
<li>使OutputStream将缓冲区的数据输出到客户端</li>
</ol>
<p>创建一个FileServlet类去实现下载</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 要获取下载文件的路径,第一个方法不行，需要绝对路径</span></span><br><span class="line">        <span class="comment">//String realPath = this.getServletContext().getRealPath(&quot;/windows.png&quot;);</span></span><br><span class="line">        String realPath = <span class="string">&quot;D:\\Servlet\\response\\target\\classes\\windows.png&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;下载的文件名&quot;</span>+realPath);</span><br><span class="line">        <span class="comment">//2. 下载的文件名是什么</span></span><br><span class="line">        String filename = realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//3. 让浏览器能够支持下载我们需要的东西</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span>+filename);</span><br><span class="line">        <span class="comment">//4. 获取下载文件的输入流</span></span><br><span class="line">        FileInputStream in = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">        <span class="comment">//5. 创建缓冲区</span></span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//6. 获取OutputStream对象</span></span><br><span class="line">        ServletOutputStream out = resp.getOutputStream();</span><br><span class="line">        <span class="comment">//7. 将FileOutputStream流写入到buffer缓冲区</span></span><br><span class="line">        <span class="comment">//8. 使OutputStream将缓冲区的数据输出到客户端</span></span><br><span class="line">        <span class="keyword">while</span> ((len=in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            out.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭流</span></span><br><span class="line">        in.close();</span><br><span class="line">        out.flush();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>同理，在web.xml中配置好映射关系</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>filedown<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.FileServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>filedown<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/filedown<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>别忘了重新配置Tomcat的deployment，启动Tomcat在浏览器中搜索响应的映射得到：</p>
<p>表示下载成功!</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200914160317369.png" alt="image-20200914160317369"></p>
<h4 id="验证码功能"><a href="#验证码功能" class="headerlink" title="验证码功能"></a>验证码功能</h4><p>验证功能分两部分，一个是前端校验，一个是后端校验</p>
<p>后端校验：Java的图片类，生成一个图片</p>
<p>创建要给ImageServlet去实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//浏览器3秒刷新一次</span></span><br><span class="line">        resp.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line">        <span class="comment">//在内存中创建一个图片</span></span><br><span class="line">        BufferedImage image = <span class="keyword">new</span> BufferedImage(<span class="number">80</span>,<span class="number">20</span>,BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        <span class="comment">//得到图片 这个方法得到了一个在平面中画画的笔</span></span><br><span class="line">        Graphics2D g = (Graphics2D)image.getGraphics();</span><br><span class="line">        <span class="comment">//设置图片背景颜色</span></span><br><span class="line">        g.setColor(Color.white);</span><br><span class="line">        <span class="comment">//图片的填充范围 宽80 长20</span></span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">//给图片写数据</span></span><br><span class="line">        g.setColor(Color.BLUE);</span><br><span class="line">        g.setFont(<span class="keyword">new</span> Font(<span class="keyword">null</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">        g.drawString(makeNum(), <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">//设置响应头通知浏览器以图片的形式打开</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;image/png&quot;</span>);<span class="comment">//等同于response.setHeader(&quot;Content-Type&quot;, &quot;image/jpeg&quot;);</span></span><br><span class="line">        <span class="comment">//告诉浏览器别让它缓存</span></span><br><span class="line">        resp.setDateHeader(<span class="string">&quot;expires&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-chche&quot;</span>);</span><br><span class="line">        <span class="comment">//把图片写给浏览器</span></span><br><span class="line">        ImageIO.write( image, <span class="string">&quot;jpg&quot;</span>, resp.getOutputStream());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//生成随机数</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">makeNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//生成一个随机对象</span></span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="comment">//范围9999999</span></span><br><span class="line">        String num = random.nextInt(<span class="number">9999999</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//生成StringBUffer对象 用与</span></span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="comment">//解释下 7 - num.length()的意义 假如不满足七位数，其余部位用0来填充 保证最后返回是七位</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">7</span> - num.length() ; i++)&#123;</span><br><span class="line">            sb.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        num = sb.toString() + num;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>同理:在web.xml中配置映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>imageservlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.ImageServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>imageservlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/image<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>启动Tomcat ，每次刷新我们得到的图片都不同 就不再截第二张了<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200915220952419.png" alt="image-20200915220952419"></p>
<h4 id="实现重定向"><a href="#实现重定向" class="headerlink" title="实现重定向"></a>实现重定向</h4><ul>
<li>再复习一遍重定向:A想访问一个资源，去找B，B说不在我这啊，让A去找C，这过程就叫重定向</li>
<li>常用于用户登录啊等等场景</li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200911204905346.png" alt="image-20200911204905346"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sendRedirect</span><span class="params">(String var1)</span> <span class="keyword">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure>

<p>在web.xml中再配置一个映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>RedirectServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.RedirectServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>RedirectServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/red<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedirectServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//response.setStatus(302);</span></span><br><span class="line">        <span class="comment">//response.setHeader(&quot;location&quot;, &quot;/r/image&quot;);</span></span><br><span class="line">        <span class="comment">//这里为什么是r呢？是因为我在Tomcat Deployment设置那里把Application context 改成了/r</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;/r/image&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当我在浏览器输入/red后 页面会跳转到：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200916222212771.png" alt="image-20200916222212771"></p>
<p>表示成功！</p>
<p>面试常问：请你聊聊转发和重定向之间的异同点</p>
<ul>
<li><p>相同点：页面都会发生跳转</p>
</li>
<li><p>不同点：请求转发的时候，url不会发生变化；307</p>
<p>而重定向的时候，url会发生变化；302</p>
</li>
</ul>
<p>重定向实现登录:</p>
<p>在web.xml中配置映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Request<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.RequestTest<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Request<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在index.jsp中写好登录页面（一开始的时候没添加上面两行编码的代码，中文显示的全是乱码 - -）</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--这里提交的路径需要找到项目的路径，这里用的那个￥&#123;&#125;需要导入js的东西，不然用不了--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span>method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>写了一个假如成功就跳转到的页面 success.jsp</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;success&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>最后，创建一个Test</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestTest</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//处理请求</span></span><br><span class="line">        String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username+<span class="string">&quot;:&quot;</span>+password);</span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;/r/success.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917184156408.png" alt="image-20200917184156408"></p>
<p>随便输了几个数字 点提交</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917180527012.png" alt="image-20200917180527012"></p>
<h2 id="6、7-HttpServletRequest"><a href="#6、7-HttpServletRequest" class="headerlink" title="6、7 HttpServletRequest"></a>6、7 HttpServletRequest</h2><p>HttpServletRequest代表客户端的请求，用户通过Http协议访问服务器，Http请求中的所有信息会被封装到HttpServletRequest，通过这些HttpServletRequest的方法，获得客户端的所有信息；其中这些信息有</p>
<h3 id="获取前端传递的参数，请求转发"><a href="#获取前端传递的参数，请求转发" class="headerlink" title="获取前端传递的参数，请求转发"></a>获取前端传递的参数，请求转发</h3><p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917182702133.png" alt="image-20200917182702133"></p>
<p>老三样，在web.xml中配置好映射</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.HPG.Servlet.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>简陋的写了一个登录页面：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--这里表单的意思是，以post方式提交表单，提交到我们的login请求--%&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/r/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> required&gt; &lt;br&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;passwd&quot;</span> required&gt; &lt;br&gt;</span><br><span class="line">    爱好：</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;代码&quot;</span>&gt;代码</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;唱歌&quot;</span>&gt;唱歌</span><br><span class="line">    &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;hobbies&quot;</span> value=<span class="string">&quot;电影&quot;</span>&gt;电影</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>写个LoginServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//解决乱码问题</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String passwd = req.getParameter(<span class="string">&quot;passwd&quot;</span>);</span><br><span class="line">        String[] hobbies = req.getParameterValues(<span class="string">&quot;hobbies&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(passwd);</span><br><span class="line">        System.out.println(hobbies.toString());</span><br><span class="line"></span><br><span class="line">        System.out.println(req.getContextPath());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过请求转发 假如是重定向 需要加个/xxx/ xxx在Application context自己找 但现在是请求转发 是不需要加那个的</span></span><br><span class="line">        <span class="comment">//气死我了 改了半天 这也让我知道请求转发是项目内部的 不需要写项目路径</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/success.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917195818860.png" alt="image-20200917195818860"></p>
<p>用户名填了hpg 密码123</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917195843761.png" alt="image-20200917195843761"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200917195851131.png" alt="image-20200917195851131"></p>
<p>成功!</p>
<h1 id="7、Cookie、Session"><a href="#7、Cookie、Session" class="headerlink" title="7、Cookie、Session"></a>7、Cookie、Session</h1><h2 id="7、1-会话"><a href="#7、1-会话" class="headerlink" title="7、1 会话"></a>7、1 会话</h2><p><strong>会话</strong>：用户打开一个浏览器，点击很多个超链接，访问多个web资源关闭浏览器，这个过程我们可以称之为会话。</p>
<p><strong>有状态会话</strong>：一位同学曾去过一间教室，再进入这个教室的时候，就知道它曾经来过了，称为有状态会话</p>
<p>下面思考一下这个问题，你怎么证明你是一个学校的学生?</p>
<ul>
<li>学校给你发了录取通知书 —— 学校给你发</li>
<li>学校的学生名单上有你的名字 ——学校标记你</li>
</ul>
<p>那么 一个网站怎么证明你来过呢？客户端——服务器端</p>
<ol>
<li>服务器端给客户端发一个信件，下次客户访问服务器端凭借信件即可，<strong>此处的信件 即为Cookie</strong> 相当于<strong>录取通知书</strong></li>
<li>服务器端登记你，下次客户端来访问的时候进行匹配查找；<strong>这项功能即为Session</strong></li>
</ol>
<h2 id="7、2-保存会话的两种技术"><a href="#7、2-保存会话的两种技术" class="headerlink" title="7、2 保存会话的两种技术"></a>7、2 保存会话的两种技术</h2><p>cookie</p>
<ul>
<li>客户端技术（请求，响应）</li>
</ul>
<p>session</p>
<ul>
<li>服务器技术，保存用户的信息；通过Session保存信息或数据</li>
</ul>
<p>常见用途:网站登录之后，下次就不用再登录了，可以直接访问</p>
<h2 id="7、3-Cookie"><a href="#7、3-Cookie" class="headerlink" title="7、3 Cookie"></a>7、3 Cookie</h2><p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921151029168.png" alt="image-20200921151029168"></p>
<ol>
<li>从请求中拿到cookie信息</li>
<li>服务器相应给客户端cookie</li>
</ol>
<ul>
<li><p>一般会保存在本地的用户目录下appData下。</p>
</li>
<li><p>由浏览器保存，不同的浏览器具有不兼容性。</p>
</li>
<li><p>由浏览器主动向服务器提供，服务端只需getCookies就行。</p>
</li>
<li><p>一个cookie只能保存一个信息</p>
</li>
<li><p>一个web站点最多存放20个cookie</p>
</li>
<li><p>cookie大小限制4kb</p>
</li>
<li><p>浏览器上限是300个cookie</p>
</li>
<li><p>不设置有效期，关闭浏览器自动失效。</p>
</li>
<li><p>控制台输入<strong>javascript:alert (document. cookie)</strong>可查看本网站下cookie</p>
</li>
<li><p>cookie中的方法：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = req.getCookies();<span class="comment">//获得cookie</span></span><br><span class="line">cookie.getName();<span class="comment">//获得cookie中的name</span></span><br><span class="line">cookie.getValue();<span class="comment">//获得cookie中的value</span></span><br><span class="line"><span class="keyword">new</span> Cookie(<span class="string">&quot;xxxx&quot;</span>, System.currentTimeMillis()+<span class="string">&quot;&quot;</span>);<span class="comment">//新建一个cookie</span></span><br><span class="line">cookie.setMaxAge(<span class="number">0</span>);<span class="comment">//设置cookie有效期。为0即删掉，以秒为基本单位</span></span><br><span class="line">resp.addCookie(cookie);<span class="comment">//响应给客户端一个cookie</span></span><br></pre></td></tr></table></figure>

<p>编写一个Servlet去实现 访问上一次访问事件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieDemo01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//服务器把你上次访问来的时间封装成一个对象，你下次访问携带此对象即可</span></span><br><span class="line">        <span class="comment">//解决中文乱码 一开始用UTF-8是乱码，改成16就正常了</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-16&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-16&quot;</span>);</span><br><span class="line"></span><br><span class="line">        PrintWriter out = resp.getWriter();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//cookie：服务器端从客户端获取</span></span><br><span class="line">        <span class="comment">//此处返回的是一个数组，表示cookie可能存在多个</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="comment">//判断cookie是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//如果存在cookie</span></span><br><span class="line">            out.write(<span class="string">&quot;你上次访问的时间是:&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++) &#123;</span><br><span class="line">                Cookie cookie = cookies[i];</span><br><span class="line">                <span class="comment">//获取cookie的名字</span></span><br><span class="line">                <span class="keyword">if</span>(cookie.getName().equals(<span class="string">&quot;lastLoginTime&quot;</span>))&#123;</span><br><span class="line">                    <span class="comment">//获取cookie 的值</span></span><br><span class="line">                    <span class="comment">//把值转换成long对象</span></span><br><span class="line">                    <span class="keyword">long</span> lastLoginTime = Long.parseLong(cookie.getValue());</span><br><span class="line">                    <span class="comment">//把long对象转换成时间</span></span><br><span class="line">                    Date date = <span class="keyword">new</span> Date(lastLoginTime);</span><br><span class="line">                    <span class="comment">//再转成字符串并输出</span></span><br><span class="line">                    out.write(date.toLocaleString());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            out.write(<span class="string">&quot;第一次访问&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//服务器端给客户端发一个cookie</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;lastLoginTime&quot;</span>,System.currentTimeMillis()+<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//给cookie设置一个有效期，不然每次关闭浏览器我们cookie都没咯 以秒为单位</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line">        resp.addCookie(cookie );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置好web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CookieDemo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.CookieDemo01<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>CookieDemo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/c1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这个注意一下，假如是第一次登录的话，访问时间应该是不显示的，要刷新一次才行；</p>
<p>同时，假如我不设置那个cookie有效时间，我只要关闭了浏览器，他就会默认你是第一次访问，但我设置了就不一样了。</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920203434337.png" alt="image-20200920203434337"></p>
<h2 id="7、4-Session（重点）"><a href="#7、4-Session（重点）" class="headerlink" title="7、4 Session（重点）"></a>7、4 Session（重点）</h2><p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921151958341.png" alt="image-20200921151958341"></p>
<p>什么是Session：</p>
<ul>
<li><p>服务器给每个用户（浏览器）创建一个Session对象</p>
</li>
<li><p>一个Session独占一个浏览器，只要浏览器没关闭，这个Session就存在</p>
</li>
<li><p>用户登录之后，整个网站他都能访问；常用于保存购物车信息等</p>
</li>
<li><p>Session与cookie的区别：</p>
<ul>
<li>Cookie是把用户的数据写给用户的浏览器 浏览器保存</li>
<li>Session是把用户的数据写到用户独占的Session中，在服务器端保存（保存重要的信息，减少服务器资源的浪费）</li>
<li>Session是由服务器生成的。</li>
</ul>
</li>
</ul>
<p>web.xml中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Session<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.SessionDemo01<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Session<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/s1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SessionDemo01，测试往session里面存东西</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo01</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//解决编码问题</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-16&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-16&quot;</span>);</span><br><span class="line">        <span class="comment">//得到session</span></span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        <span class="comment">//往session存东西</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;apple&quot;</span>);</span><br><span class="line">        <span class="comment">//获取session的id</span></span><br><span class="line">        String id = session.getId();</span><br><span class="line">        <span class="comment">//判断session是不是新创建的</span></span><br><span class="line">        <span class="keyword">if</span>(session.isNew()) &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;session创建成功，ID：&quot;</span>+id);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;session已经在服务器中存在了，ID：&quot;</span>+id);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Session创建的时候做了什么事情</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Cookie jsessionid = new Cookie(&quot;JSESSIONID&quot;, id);</span></span><br><span class="line"><span class="comment">        resp.addCookie(jsessionid);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920214027374.png" alt="image-20200920214027374"></p>
<p>再来一个</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SessionDemo02<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.SessionDemo02<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SessionDemo02<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/s2<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>再写一个SessionDemo02,测试从session中取东西</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo02</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//解决编码问题</span></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;chareset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        String name = (String) session.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第一次访问s2时候，打印出来的是null；</p>
<p>访问完s1,往session里存放数据后再访问一次s2得到结果：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920214340513.png" alt="image-20200920214340513"></p>
<ul>
<li>注销Session</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionDemo03</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        <span class="comment">//取消session</span></span><br><span class="line">        session.removeAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="comment">//注销session</span></span><br><span class="line">        session.invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们测试一下：一开始用s1创建 </p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920220004996.png" alt="image-20200920220004996"></p>
<p>s2进行打印<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920220914448.png" alt="image-20200920220914448"></p>
<p>s3注销<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920220935509.png" alt="image-20200920220935509"></p>
<p>s2再打印<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200920220948845.png" alt></p>
<p>完成了注销</p>
<p>当然了，我们可以用web.xml去配置 让它会话在一定时间后自动过期：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--十分钟后session过期，这里的单位是分钟--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>10<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="8、JSP"><a href="#8、JSP" class="headerlink" title="8、JSP"></a>8、JSP</h1><h2 id="8、1-什么是JSP"><a href="#8、1-什么是JSP" class="headerlink" title="8、1 什么是JSP"></a>8、1 什么是JSP</h2><ul>
<li>JSP 即 java server pages：java服务器端页面，也和Servlet一样用于开发动态web技术</li>
<li>特点:写jsp像在写html，用标签语言进行，那么与html有什么区别呢？<ul>
<li>HTML只给用户提供静态数据</li>
<li>JSP页面中可以嵌入Java代码，为用户提供动态数据</li>
</ul>
</li>
</ul>
<h2 id="8、2-JSP原理"><a href="#8、2-JSP原理" class="headerlink" title="8、2 JSP原理"></a>8、2 JSP原理</h2><p>思路:jsp到底是怎么执行的呢？</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921153803104.png" alt="image-20200921153803104"> </p>
<p>我们点开此文件夹一直找，直到最后我们进入：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921153947926.png" alt="image-20200921153947926"></p>
<p>我们发现页面转换成了java程序</p>
<p><strong>浏览器向服务器发送请求，不管访问什么资源，其实都在访问Servlet</strong></p>
<p>那么JSP最后也会转成一个java类，那么这又是为什么呢？我们点开源码分析下</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921154520100.png" alt="image-20200921154520100"></p>
<p>我们再分析这个类，发现它是由HttpServlet继承的，而我们前面学习过了，HttpServlet其实是继承Servlet的，因此JSP本质上其实就是个Servlet<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921154934889.png" alt="image-20200921154934889"></p>
<p>我们比对一下源码和index.jsp，发现我们index.jsp中的页面比源码中的要美观很多，它帮我们解决了很多繁琐的事情</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921155234967.png" alt="image-20200921155234967"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921155255365.png" alt="image-20200921155255365"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//初始化</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspInit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//销毁</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//JspService</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(<span class="keyword">final</span> javax.servlet.http.HttpServletRequest request, <span class="keyword">final</span> javax.servlet.http.HttpServletResponse response)</span></span></span><br></pre></td></tr></table></figure>

<p>接下来我们看看这个_jspService都做了什么事情</p>
<ol>
<li><p>它做了一些请求判断</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) &#123;</span><br><span class="line">      <span class="keyword">final</span> java.lang.String _jspx_method = request.getMethod();</span><br><span class="line">      <span class="keyword">if</span> (<span class="string">&quot;OPTIONS&quot;</span>.equals(_jspx_method)) &#123;</span><br><span class="line">        response.setHeader(<span class="string">&quot;Allow&quot;</span>,<span class="string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="string">&quot;GET&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="string">&quot;POST&quot;</span>.equals(_jspx_method) &amp;&amp; !<span class="string">&quot;HEAD&quot;</span>.equals(_jspx_method)) &#123;</span><br><span class="line">        response.setHeader(<span class="string">&quot;Allow&quot;</span>,<span class="string">&quot;GET, HEAD, POST, OPTIONS&quot;</span>);</span><br><span class="line">        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, <span class="string">&quot;JSP 只允许 GET、POST 或 HEAD。Jasper 还允许 OPTIONS&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      		&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>它内置了一些对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> javax.servlet.jsp.PageContext pageContext;<span class="comment">//页面上下文</span></span><br><span class="line">    javax.servlet.http.HttpSession session = <span class="keyword">null</span>;<span class="comment">//session</span></span><br><span class="line">    <span class="keyword">final</span> javax.servlet.ServletContext application;<span class="comment">//applicationContext</span></span><br><span class="line">    <span class="keyword">final</span> javax.servlet.ServletConfig config; <span class="comment">//config</span></span><br><span class="line">    javax.servlet.jsp.JspWriter out = <span class="keyword">null</span>; <span class="comment">//out</span></span><br><span class="line">    <span class="keyword">final</span> java.lang.Object page = <span class="keyword">this</span>; <span class="comment">//page：当前页</span></span><br><span class="line">    javax.servlet.jsp.JspWriter _jspx_out = <span class="keyword">null</span>;</span><br><span class="line">    javax.servlet.jsp.PageContext _jspx_page_context = <span class="keyword">null</span>;</span><br><span class="line"> 	HttpServletRequest request <span class="comment">//请求</span></span><br><span class="line">    HttpServletResponse   <span class="comment">//响应</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>输出页面前增加的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html&quot;</span>); <span class="comment">//设置响应的页面类型</span></span><br><span class="line">pageContext = _jspxFactory.getPageContext(<span class="keyword">this</span>, request, response,<span class="keyword">null</span>, <span class="keyword">true</span>, <span class="number">8192</span>, <span class="keyword">true</span>);</span><br><span class="line">_jspx_page_context = pageContext;</span><br><span class="line">application = pageContext.getServletContext();</span><br><span class="line">config = pageContext.getServletConfig();</span><br><span class="line">session = pageContext.getSession();</span><br><span class="line">out = pageContext.getOut();</span><br><span class="line">_jspx_out = out;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="4">
<li>2和3中的对象,代码都能在jsp页面中直接使用</li>
</ol>
<ul>
<li>大致的流程图：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921161527740.png" alt="image-20200921161527740"></li>
</ul>
<p>在jsp中，如果是java代码会原封不动输出，如果是html语言或是其他的，会被转换为形如这样的格式，输出到前端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out.write(<span class="string">&quot;&lt;html&gt;\n&quot;</span>);</span><br></pre></td></tr></table></figure>

<h1 id="9、-JavaBean"><a href="#9、-JavaBean" class="headerlink" title="9、 JavaBean"></a>9、 JavaBean</h1><p>实体类：</p>
<p>javabean别想的太复杂，其实和普通的java类没什么区别，只是他必须要带有一些特定的东西。</p>
<p>为什么呢？因为我们后面学到了框架部分，我们就知道，项目是由一个个模块，螺丝，组装起的；</p>
<p>这个时候我们就需要有一种“javabean”的思想去解决问题。</p>
<p>JavaBean有特定写法</p>
<ul>
<li><p>是公有类的 —— public class xxx</p>
</li>
<li><p>必须要有一个无参构造——public class xxxx{}</p>
</li>
<li><p>属性必须私有化 —— private String name；</p>
</li>
<li><p>必须有对应的getter/setter方法</p>
</li>
</ul>
<p>一般用来和数据库字段做映射：ORM</p>
<p>ORM：对象关系映射</p>
<ul>
<li>表→类</li>
<li>字段→属性</li>
<li>行记录→对象</li>
</ul>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
<th>address</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>apple</td>
<td>14</td>
<td>深圳</td>
</tr>
<tr>
<td>2</td>
<td>pear</td>
<td>33</td>
<td>广州</td>
</tr>
<tr>
<td>3</td>
<td>peach</td>
<td>53</td>
<td>宜昌</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> Sting name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="comment">//伪代码，假设存在构造方法</span></span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">1</span>,<span class="string">&quot;apple&quot;</span>,<span class="number">14</span>,<span class="string">&quot;深圳&quot;</span>);</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">2</span>,<span class="string">&quot;pear&quot;</span>,<span class="number">33</span>,<span class="string">&quot;广州&quot;</span>);</span><br><span class="line">    <span class="keyword">new</span> Person(<span class="number">3</span>,<span class="string">&quot;peach&quot;</span>,<span class="number">53</span>,<span class="string">&quot;宜昌&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们在数据库中创建了表，表中是由相应的成员属性组成，为什么说是相应的呢，因为我们的javabean中的对象应该具有我们数据库中表的属性，也就是形成了一一对应的关系。<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200921221756158.png" alt="image-20200921221756158"></p>
<p>下面我们写一个javabean 再写一个相应的jsp页面感受一下：</p>
<p>Person.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> age, String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>javabean.jsp:</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="comment">//    Person person = new Person();</span></span><br><span class="line"><span class="comment">//    person.setAddress(&quot;深圳&quot;);</span></span><br><span class="line"><span class="comment">//    person.setAge(3);</span></span><br><span class="line"><span class="comment">//    person.setId(1);</span></span><br><span class="line"><span class="comment">//    person.setName(&quot;apple&quot;);</span></span><br><span class="line">%&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--等价于上面的java代码，<span class="keyword">new</span>了一个Person对象 <span class="class"><span class="keyword">class</span>其实就是映射的路径--%&gt;</span></span><br><span class="line"><span class="class">&lt;%--<span class="title">name</span>是<span class="title">id</span>,<span class="title">property</span>是属性，<span class="title">value</span>是值--%&gt;</span></span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;com.hpg.pojo.Person&quot; scope=&quot;page&quot;/&gt;</span><br><span class="line">&lt;%--这四行代码等价与上述的set代码--%&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;address&quot;</span> value=<span class="string">&quot;深圳&quot;</span>/&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;1&quot;</span>/&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;3&quot;</span>/&gt;</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;apple&quot;</span>/&gt;</span><br><span class="line">&lt;%--输出信息--%&gt;</span><br><span class="line">姓名：&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">id：&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">年龄：&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line">地址：&lt;jsp:getProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;address&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出页面:<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200922194913829.png" alt="image-20200922194913829"></p>
<h1 id="10、-MVC三层架构"><a href="#10、-MVC三层架构" class="headerlink" title="10、 MVC三层架构"></a>10、 MVC三层架构</h1><ul>
<li>什么是MVC：Model View Controller-模型视图控制器</li>
</ul>
<h2 id="10、1-早期架构"><a href="#10、1-早期架构" class="headerlink" title="10、1 早期架构"></a>10、1 早期架构</h2><p>我们上面学到了其实Jsp就是Servlet，那为什么还要区分这两个呢？</p>
<p>其实是为了方便维护；</p>
<p><strong>Servlet专注于处理请求以及控制视图跳转；</strong></p>
<p><strong>Jsp专注于显示数据</strong></p>
<p>早期架构图:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200922205842751.png" alt="image-20200922205842751"></p>
<p>用户直接访问控制层，控制层就可以直接操作数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Servlet--CRUD--&gt;数据库</span><br><span class="line">弊端：程序很臃肿，耦合度高，不利于维护</span><br><span class="line">Servlet的代码功能：处理请求，响应，视图跳转，处理JDBC，处理业务代码，处理逻辑代码 </span><br><span class="line">架构思想：我们需要在耦合度高的地方&quot;加一层&quot;</span><br><span class="line">比如说有很多个数据库：Mysql，Oracle...我们就需要要统一的接口JDBC来管理</span><br></pre></td></tr></table></figure>

<h2 id="10、2-MVC三层架构"><a href="#10、2-MVC三层架构" class="headerlink" title="10、2 MVC三层架构"></a>10、2 MVC三层架构</h2><p>现在的呢？mvc架构图：<img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200922210408685.png" alt="image-20200922210408685"></p>
<h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><ul>
<li>业务处理层：业务逻辑（Service）</li>
<li>数据持久层：CRUD（Dao）</li>
</ul>
<h3 id="VIEW"><a href="#VIEW" class="headerlink" title="VIEW"></a>VIEW</h3><ul>
<li>展示数据</li>
<li>提供链接发起下一步Servlet请求/提供用户交互</li>
</ul>
<h3 id="Controller（Servlet）"><a href="#Controller（Servlet）" class="headerlink" title="Controller（Servlet）"></a>Controller（Servlet）</h3><ul>
<li><p>接受用户的请求：req:请求参数，session信息  </p>
</li>
<li><p>交给业务层处理对应的代码</p>
</li>
<li><p>控制视图的跳转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录---&gt;接受用户的登录请求---&gt;处理用户的请求（获取用户登录的参数，username，password）---&gt;交给业务层处理登录业务（判断用户名密码的是否正确:事务)---&gt;Dao层查询用户名和密码是否正确---&gt;查询数据库</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="11、-（重点）Filter过滤器"><a href="#11、-（重点）Filter过滤器" class="headerlink" title="11、 （重点）Filter过滤器"></a>11、 （重点）Filter过滤器</h1><h2 id="11、1-什么是过滤器"><a href="#11、1-什么是过滤器" class="headerlink" title="11、1 什么是过滤器"></a>11、1 什么是过滤器</h2><p>Filter：过滤器，用来过滤网站的数据；</p>
<ul>
<li>处理中文乱码</li>
<li>登录验证</li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200925222623344.png" alt="image-20200925222623344"></p>
<h2 id="11、2-Filter开发步骤"><a href="#11、2-Filter开发步骤" class="headerlink" title="11、2 Filter开发步骤"></a>11、2 Filter开发步骤</h2><ol>
<li>导包</li>
<li>编写过滤器</li>
<li>编写java类实现Filter接口，并实现其doFilter方法。</li>
<li>在web.xml 文件中使用<filter>和<filter-mapping>元素对编写的filter类进行注册，并设置它所能拦截的资源。</filter-mapping></filter></li>
</ol>
<p>注意：导包不能导错:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br></pre></td></tr></table></figure>

<p>应用的例子:</p>
<p>编写一个过滤编码的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hpg.filter;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//初始化 web服务器启动 就已经被初始化了 以准备随时等待过滤对象出现</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//chain 链</span></span><br><span class="line">    <span class="comment">//1.过滤器中的所有代码，在过滤特定请求的时候都会执行</span></span><br><span class="line">    <span class="comment">//2.必须要让过滤器继续同行 就是这行filterChain.doFilter(servletRequest, servletResponse);</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="string">&quot;utf-16&quot;</span>);</span><br><span class="line">        servletResponse.setCharacterEncoding(<span class="string">&quot;utf-16&quot;</span>);</span><br><span class="line">        servletResponse.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;执行前&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);<span class="comment">//一定要写的，如果不写程序到这就会被拦截</span></span><br><span class="line">        System.out.println(<span class="string">&quot;执行后&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//销毁:当web服务器关闭的时候，过滤器会被销毁</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;销毁&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShowServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//resp.setCharacterEncoding(&quot;utf-16&quot;);</span></span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;你好你好&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ShowServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.ShowServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这样就没过滤器的支持--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ShowServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ShowServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--这样就有过滤器的支持--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ShowServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show/ShowServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.hpg.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--只要是/show/路径下的任何请求，都会经过这个过滤器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>一开始走ShowServlet的时候</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200928222031228.png" alt="image-20200928222031228"></p>
<p>走通过过滤器筛过的路径的时候</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200928222053078.png" alt="image-20200928222053078"></p>
<p>整个生命周期：</p>
<p>启动Tomcat就开始初始化了，进一次页面就会执行一次，最后关闭服务器就销毁；</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200928222106630.png" alt="image-20200928222106630"></p>
<h1 id="12、监听器Listener"><a href="#12、监听器Listener" class="headerlink" title="12、监听器Listener"></a>12、监听器Listener</h1><h2 id="12、1-什么是监听器"><a href="#12、1-什么是监听器" class="headerlink" title="12、1 什么是监听器"></a>12、1 什么是监听器</h2><ul>
<li>监听器就是一个实现<strong>特定接口的普通java程序</strong>，这个程序专门用于<strong>监听另一个java对象的方法调用或属性改变</strong>，当被监听对象<strong>发生上述事件</strong>后，<strong>监听器某个方法将立即被执行</strong>。</li>
</ul>
<h2 id="12、2-监听原理"><a href="#12、2-监听原理" class="headerlink" title="12、2 监听原理"></a>12、2 监听原理</h2><ol>
<li>存在事件源</li>
<li>提供监听器</li>
<li>为事件源注册监听器</li>
<li>操作事件源，产生事件对象，将事件对象传递给监听器，并且执行监听器相应监听方法</li>
</ol>
<h2 id="12、3-应用例子测试"><a href="#12、3-应用例子测试" class="headerlink" title="12、3 应用例子测试"></a>12、3 应用例子测试</h2><ol>
<li><p>编写一个监听器——实现监听器接口，重写里面的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnlineCountListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//创建session监听：看你的一举一动，一旦创建session，就会触发一次这事件;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//得到上下文</span></span><br><span class="line">        ServletContext ctx = httpSessionEvent.getSession().getServletContext();</span><br><span class="line"></span><br><span class="line">        System.out.println(httpSessionEvent.getSession().getId());</span><br><span class="line">        <span class="comment">//在线人数</span></span><br><span class="line">        Integer onlineCount = (Integer) ctx.getAttribute(<span class="string">&quot;OnlineCount&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(onlineCount == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//假如没有用户 那么new一个新的用户</span></span><br><span class="line">            onlineCount = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//否则加一</span></span><br><span class="line">            <span class="keyword">int</span> count = onlineCount.intValue();</span><br><span class="line">            onlineCount = <span class="keyword">new</span> Integer(count + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ctx.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>,onlineCount);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//销毁session监听</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;</span><br><span class="line">        ServletContext ctx = httpSessionEvent.getSession().getServletContext();</span><br><span class="line">        Integer onlineCount = (Integer) ctx.getAttribute(<span class="string">&quot;OnlineCount&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(onlineCount == <span class="keyword">null</span>)&#123;</span><br><span class="line">            onlineCount = <span class="keyword">new</span> Integer(<span class="number">0</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> count = onlineCount.intValue();</span><br><span class="line">            onlineCount = <span class="keyword">new</span> Integer(count - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ctx.setAttribute(<span class="string">&quot;OnlineCount&quot;</span>, onlineCount);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在web.xml中注册监听器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册监听器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.hpg.listener.OnlineCountListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>看情况是否使用</p>
</li>
</ol>
<p>chrome打开</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929171506843.png" alt="image-20200929171506843"></p>
<p>再添加一个edge打开：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929171552721.png" alt="image-20200929171552721"></p>
<h1 id="13、-过滤器-监听器-常见应用"><a href="#13、-过滤器-监听器-常见应用" class="headerlink" title="13、 过滤器 监听器 常见应用"></a>13、 过滤器 监听器 常见应用</h1><h2 id="13、1-监听器GUI"><a href="#13、1-监听器GUI" class="headerlink" title="13、1 监听器GUI"></a>13、1 监听器GUI</h2><ul>
<li>我们可以创建一个图形化界面去实现监听的效果</li>
</ul>
<p>例子:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929190247510.png" alt="image-20200929190247510"></p>
<p>缩小窗口，打开窗口，关闭窗口 都有不同的表现：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929190351615.png" alt="image-20200929190351615"></p>
<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPanel</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//panel是面板的意思</span></span><br><span class="line">        <span class="comment">//新建一个窗体</span></span><br><span class="line">        Frame hello = <span class="keyword">new</span> Frame(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        <span class="comment">//设置一个面板</span></span><br><span class="line">        Panel panel = <span class="keyword">new</span> Panel(<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//设置窗体的布局</span></span><br><span class="line">        hello.setLayout(<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//设置细节</span></span><br><span class="line">        <span class="comment">//设置坐标</span></span><br><span class="line">        hello.setBounds(<span class="number">300</span>,<span class="number">300</span>,<span class="number">500</span>,<span class="number">500</span>);</span><br><span class="line">        <span class="comment">//设置背景颜色</span></span><br><span class="line">        hello.setBackground(<span class="keyword">new</span> Color(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>));</span><br><span class="line">        <span class="comment">//设置坐标</span></span><br><span class="line">        panel.setBounds(<span class="number">50</span>,<span class="number">50</span>,<span class="number">300</span>,<span class="number">300</span>);</span><br><span class="line">        <span class="comment">//设置背景颜色</span></span><br><span class="line">        panel.setBackground(<span class="keyword">new</span> Color(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>));</span><br><span class="line">        <span class="comment">//嵌套进去</span></span><br><span class="line">        hello.add(panel);</span><br><span class="line">        <span class="comment">//设置可见性</span></span><br><span class="line">        hello.setVisible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//如果不加监听，发现点击X没反应</span></span><br><span class="line">        hello.addWindowListener(<span class="keyword">new</span> WindowListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowOpened</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;open&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosing</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;closing&quot;</span>);</span><br><span class="line">                System.exit(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosed</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;closed&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowIconified</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowDeiconified</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowActivated</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Activated&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowDeactivated</span><span class="params">(WindowEvent e)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;None Activated&quot;</span>);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="13、2-Filter实现权限拦截"><a href="#13、2-Filter实现权限拦截" class="headerlink" title="13、2 Filter实现权限拦截"></a>13、2 Filter实现权限拦截</h2><ul>
<li>用户登录之后才能进入主页，用户注销后不能进入主页；就算你一开始进去过主页了，并且保存了你的成功的网页，但你注销了，如果在url中直接复制网址，也不能进去！</li>
</ul>
<p>如何实现呢？</p>
<ol>
<li>用户登录之后，向Session中存放用户的数据</li>
<li>进入主页时候判断用户是否已经登录了（可以在jsp中实现，但最好最好用过滤器实现！！）</li>
</ol>
<p>代码:</p>
<p>首先 一个登录界面（login.jsp):</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;登录&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/servlet/login&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>登录成功后进入的主页面(success.jsp):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%--&lt;%--%&gt;</span><br><span class="line">&lt;%--    Object user_session = request.getSession().getAttribute(<span class="string">&quot;USER_SESSION&quot;</span>);--%&gt;</span><br><span class="line">&lt;%--    <span class="keyword">if</span>(user_session == <span class="keyword">null</span>) &#123;--%&gt;</span><br><span class="line">&lt;%--        response.sendRedirect(<span class="string">&quot;/login.jsp&quot;</span>);--%&gt;</span><br><span class="line">&lt;%--    &#125;--%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--%&gt;--%&gt;</span><br><span class="line">&lt;h1&gt;主页&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;&lt;a href=&quot;/servlet/logout&quot;&gt;注销&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>登录失败的页面(error.jsp):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;错误&lt;/h1&gt;</span><br><span class="line">    &lt;h3&gt;没有权限，用户名错误&lt;/h3&gt;</span><br><span class="line">    &lt;a href=&quot;/login.jsp&quot;&gt;返回登录页面&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ok，接下来是登录和登出的两个Servlet</p>
<p>登录(LoginServlet):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取前端请求的参数</span></span><br><span class="line">        String username = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="comment">//若登陆成功</span></span><br><span class="line">        <span class="keyword">if</span> (username.equals(<span class="string">&quot;admin&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">//把id存在session里面</span></span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;USER_SESSION&quot;</span>,req.getSession().getId());</span><br><span class="line">            <span class="comment">//重定向</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/sys/success.jsp&quot;</span>);</span><br><span class="line">            <span class="comment">//登录失败的话</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>登出（LogOut）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogOut</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        Object user_session = req.getSession().getAttribute(<span class="string">&quot;USER_SESSION&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user_session != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">//移除session</span></span><br><span class="line">            req.getSession().removeAttribute(<span class="string">&quot;USER_SESSION&quot;</span>);</span><br><span class="line">            <span class="comment">//重定向到登录界面</span></span><br><span class="line">            resp.sendRedirect(<span class="string">&quot;/login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>同时，为了能够成功实现权限拦截，需要用到Filter</p>
<p>SysFilter.java（意思是，所有Sys下的页面都必须经由这个过滤器筛过才能进入）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SysFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest Request, ServletResponse Response, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) Request;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) Response;</span><br><span class="line">        <span class="comment">//如果是直接复制网址的，不是靠着登录进来的话，就回到错误</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(request.getSession().getAttribute(<span class="string">&quot;USER_SESSION&quot;</span>) == <span class="keyword">null</span>) &#123;</span><br><span class="line">            response.sendRedirect(<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(Request,Response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>最后一步：在web.xml好配置好路径映射以及过滤器</p>
<p>一定要注意好我们的url-pattern里的路径是要与各自的.jsp中的相对应</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LogOut<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.hpg.servlet.LogOut<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LogOut<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/logout<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>过滤器:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--sys下的页面都会被在这个过滤器筛一遍--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>SysFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.hpg.listener.SysFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>SysFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/sys/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>登录:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929220409618.png" alt="image-20200929220409618"></p>
<p>登录失败：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929220445992.png" alt="image-20200929220445992"></p>
<p>点击返回登录页面就可以重新回到登录主页</p>
<p>登录成功：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929220519404.png" alt="image-20200929220519404"></p>
<p><strong>此时，假如我直接保存我们的成功网址，然后点注销，再直接复制网址进入的话：</strong></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929220555863.png" alt="image-20200929220555863"></p>
<p>大功告成！目录结构：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200929220640030.png" alt="image-20200929220640030"></p>
<h1 id="14、-JDBC"><a href="#14、-JDBC" class="headerlink" title="14、 JDBC"></a>14、 JDBC</h1><ul>
<li>什么是JDBC？ Java连接数据库</li>
</ul>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201001195512972.png" alt="image-20201001195512972"></p>
<p>需要jar包的支持：</p>
<ul>
<li>java.sql</li>
<li>javax.sql</li>
<li>mysql-connector-java 连接驱动必须要导入的包</li>
</ul>
<h2 id="14、1-JDBC固定步骤"><a href="#14、1-JDBC固定步骤" class="headerlink" title="14、1 JDBC固定步骤"></a>14、1 JDBC固定步骤</h2><ol>
<li>加载驱动</li>
<li>连接数据库，代表数据库</li>
<li>向数据库发送SQL的对象statement 用于CRUD</li>
<li>编写SQL →不同业务，不同SQL</li>
<li>执行SQL</li>
<li>关闭连接</li>
</ol>
<p>应用例子:</p>
<p>下载了SQLyog后 在其中创建一个表:JDBC</p>
<p>然后创建表，写数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">users</span>(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">	‘<span class="keyword">name</span>‘ <span class="built_in">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">	‘<span class="keyword">password</span>‘ <span class="built_in">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">	email <span class="built_in">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">	birthday <span class="built_in">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span>(<span class="keyword">id</span>,‘<span class="keyword">name</span>‘,‘<span class="keyword">password</span>‘,email,birthday)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;zs@qq,com&#x27;</span>,<span class="string">&#x27;2000-01-01&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span>(<span class="keyword">id</span>,‘<span class="keyword">name</span>‘,‘<span class="keyword">password</span>‘,email,birthday)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">2</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;ls@qq,com&#x27;</span>,<span class="string">&#x27;2000-01-01&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">users</span>(<span class="keyword">id</span>,‘<span class="keyword">name</span>‘,‘<span class="keyword">password</span>‘,email,birthday)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;ww@qq,com&#x27;</span>,<span class="string">&#x27;2000-01-01&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> *<span class="keyword">FROM</span> <span class="keyword">users</span>;</span><br></pre></td></tr></table></figure>

<p>创建出的表:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008155922109.png" alt="image-20201008155922109"></p>
<p>在IDEA中连接好数据库</p>
<p>TestJDBC.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//配置信息</span></span><br><span class="line">        <span class="comment">//useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码问题</span></span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&quot;</span>;</span><br><span class="line">        <span class="comment">//用户名</span></span><br><span class="line">        String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="comment">//密码</span></span><br><span class="line">        String password = <span class="string">&quot;gakki3323&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2.连接数据库，代表数据库</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="comment">//3.向数据库发送SQL的对象statement  能用来CRUD/增删改查</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line">        <span class="comment">//4.编写Sql</span></span><br><span class="line">        String sql = <span class="string">&quot;select * from users&quot;</span>;</span><br><span class="line">        <span class="comment">//5.执行查询sql→返回一个结果集</span></span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">            System.out.println(resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            System.out.println(resultSet.getObject(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">            System.out.println(resultSet.getObject(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">            System.out.println(resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">            System.out.println(resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6.关闭连接，释放资源，一定要做的！！先开的后关</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008160035554.png" alt="image-20201008160035554"></p>
<p>插入的Test：</p>
<p>TestJDBC2.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//配置信息</span></span><br><span class="line">        <span class="comment">//useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码问题</span></span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&quot;</span>;</span><br><span class="line">        <span class="comment">//用户名</span></span><br><span class="line">        String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="comment">//密码</span></span><br><span class="line">        String password = <span class="string">&quot;gakki3323&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2.连接数据库，代表数据库</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="comment">//3.编写SQL</span></span><br><span class="line">        String sql = <span class="string">&quot;insert into users(id, name, password, email, birthday) values (?,?,?,?,?);&quot;</span>;</span><br><span class="line">        <span class="comment">//4.预编译</span></span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">        preparedStatement.setInt(<span class="number">1</span>,<span class="number">4</span>);<span class="comment">//给第一个占位符？的值赋值为1</span></span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>,<span class="string">&quot;hpg&quot;</span>);<span class="comment">//给第二个占位符？的值赋值为hpg</span></span><br><span class="line">        preparedStatement.setString(<span class="number">3</span>,<span class="string">&quot;123456&quot;</span>);<span class="comment">//给第三个占位符？的值赋值为123456</span></span><br><span class="line">        preparedStatement.setString(<span class="number">4</span>,<span class="string">&quot;123@qq.com&quot;</span>);<span class="comment">//给第四个占位符？的值赋值为123@qq.com</span></span><br><span class="line">        preparedStatement.setDate(<span class="number">5</span>,<span class="keyword">new</span> Date(<span class="keyword">new</span> java.util.Date().getTime()));<span class="comment">//给第五个占位符？的值赋值为new Date(new java.util.Date().getTime())</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.执行sql</span></span><br><span class="line">        <span class="keyword">int</span> i = preparedStatement.executeUpdate();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;插入成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">//6.关闭连接，释放资源，一定要做的！！先开的后关</span></span><br><span class="line"></span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008161729066.png" alt="image-20201008161729066"></p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008161734949.png" alt="image-20201008161734949"></p>
<h2 id="14、2-JDBC事务"><a href="#14、2-JDBC事务" class="headerlink" title="14、2  JDBC事务"></a>14、2  JDBC事务</h2><ul>
<li>要么都成功，要么都失败</li>
<li>ACID原则——保证了数据的安全<ul>
<li><strong>A(原子性)</strong>：一个事务的所有系列操作步骤被看成一个动作，所有的步骤要么全部完成，要么一个也不会完成。如果在事务过程中发生错误，则会回滚到事务开始前的状态，将要被改变的数据库记录不会被改变。</li>
<li><strong>C(一致性)</strong>：一致性是指在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏，即数据库事务不能破坏关系数据的完整性及业务逻辑上的一致性。</li>
<li><strong>I(隔离性)</strong>：主要用于实现并发控制，隔离能够确保并发执行的事务按顺序一个接一个地执行。通过隔离，一个未完成事务不会影响另外一个未完成事务。</li>
<li><strong>D(持久性)</strong>：一旦一个事务被提交，它应该持久保存，不会因为与其他操作冲突而取消这个事务。</li>
</ul>
</li>
</ul>
<h3 id="Junit单元测试"><a href="#Junit单元测试" class="headerlink" title="Junit单元测试"></a>Junit单元测试</h3><p>引入依赖 pom.xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>简单测试:</p>
<p>@Test注解只在方法上有效，只要加了这个注解的方法，就可以直接运行</p>
<p>JDBCTest.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC3</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>成果:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008163254905.png" alt></p>
<h3 id="JDBC事务回滚"><a href="#JDBC事务回滚" class="headerlink" title="JDBC事务回滚"></a>JDBC事务回滚</h3><p>首先在数据库中创建好表：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008170654754.png" alt="image-20201008170654754"></p>
<p>编写测试类:</p>
<p>JDBCTest3.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC3</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        <span class="comment">//配置信息</span></span><br><span class="line">        <span class="comment">//useUnicode=true&amp;characterEncoding=utf-8 解决中文乱码问题</span></span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8&quot;</span>;</span><br><span class="line">        <span class="comment">//用户名</span></span><br><span class="line">        String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="comment">//密码</span></span><br><span class="line">        String password = <span class="string">&quot;gakki3323&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.加载驱动</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2.连接数据库，代表数据库</span></span><br><span class="line">            connection = DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3.通知数据库开启事务 false 开启</span></span><br><span class="line">            connection.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//4.编写sql</span></span><br><span class="line">            String sql = <span class="string">&quot;update account set money = money - 100 where name = &#x27;A&#x27;&quot;</span>;</span><br><span class="line">            <span class="comment">//5.提交</span></span><br><span class="line">            connection.prepareStatement(sql).executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//制造错误</span></span><br><span class="line">            <span class="comment">//int i = 1 / 0;</span></span><br><span class="line">            <span class="comment">//编写sql</span></span><br><span class="line">            String sql2 = <span class="string">&quot;update account set money = money + 100 where name = &#x27;B&#x27;&quot;</span>;</span><br><span class="line">            <span class="comment">//提交</span></span><br><span class="line">            connection.prepareStatement(sql2).executeUpdate();</span><br><span class="line"></span><br><span class="line">            connection.commit();<span class="comment">//以上两条都成功了就提交</span></span><br><span class="line">            System.out.println(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//出现异常 通知数据库回滚</span></span><br><span class="line">                    connection.rollback();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>假如我的编写错误那行代码不注释掉，执行后的结果是：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008170818909.png" alt="image-20201008170818909"></p>
<p>表的数据是没有变的</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008170831932.png" alt="image-20201008170831932"></p>
<p>注释掉后:</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008170914182.png" alt="image-20201008170914182"></p>
<p>表的数据改变：</p>
<p><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20201008170933029.png" alt="image-20201008170933029"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Erii</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://uesugier11.github.io/2020/10/01/JavaWeb/">http://uesugier11.github.io/2020/10/01/JavaWeb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://uesugier11.github.io" target="_blank">Erii B1og</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Java/">Java</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Web/">Web</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Tomcat/">Tomcat</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Http/">Http</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Mavan/">Mavan</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Servlet/">Servlet</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Cookie/">Cookie</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Session/">Session</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Filter/">Filter</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/Listener/">Listener</a><a class="post-meta__tags" href="/UesugiEr11.github.io/tags/JDBC/">JDBC</a></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200923234159053.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/UesugiEr11.github.io/2020/10/08/%E7%AE%97%E6%B3%95/"><img class="prev-cover" src="https://gitee.com/UesugiEr11/pictures/raw/master/img/u=163424697,1442820140&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/UesugiEr11.github.io/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">算法</div></div></a></div><div class="next-post pull-right"><a href="/UesugiEr11.github.io/2020/09/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><img class="next-cover" src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20200924202930084.png" onerror="onerror=null;src='/UesugiEr11.github.io/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据结构</div></div></a></div></nav></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/UesugiEr11.github.io/img/avater.jpg" onerror="this.onerror=null;this.src='/UesugiEr11.github.io/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Erii</div><div class="author-info__description">普普通通程序员</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/UesugiEr11.github.io/archives/"><div class="headline">文章</div><div class="length-num">14</div></a></div><div class="card-info-data-item is-center"><a href="/UesugiEr11.github.io/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div><div class="card-info-data-item is-center"><a href="/UesugiEr11.github.io/categories/"><div class="headline">分类</div><div class="length-num">72</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.</span> <span class="toc-text">1、基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1%E3%80%81web%E5%BC%80%E5%8F%91"><span class="toc-number">1.1.</span> <span class="toc-text">1.1、web开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2%E3%80%81web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.</span> <span class="toc-text">1.2、web应用程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3%E3%80%81%E9%9D%99%E6%80%81web%EF%BC%88%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">1.3、静态web（服务器）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4%E3%80%81%E5%8A%A8%E6%80%81web%EF%BC%88%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89"><span class="toc-number">1.4.</span> <span class="toc-text">1.4、动态web（服务器）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">2、web服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E3%80%81%E6%8A%80%E6%9C%AF%E8%AE%B2%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text">2.1、技术讲解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E3%80%81web%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8Eweb%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2.2、web服务器与web应用服务器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81Tomcat"><span class="toc-number">3.</span> <span class="toc-text">3、Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%811-%E5%AE%89%E8%A3%85Tomcat"><span class="toc-number">3.1.</span> <span class="toc-text">3、1 安装Tomcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%812-%E5%90%AF%E5%8A%A8Tomcat"><span class="toc-number">3.2.</span> <span class="toc-text">3、2 启动Tomcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%813-%E9%85%8D%E7%BD%AETomcat"><span class="toc-number">3.3.</span> <span class="toc-text">3、3 配置Tomcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%814-%E5%BC%95%E7%94%B3-%E5%8F%91%E5%B8%83%E4%B8%80%E4%B8%AAweb%E7%BD%91%E7%AB%99"><span class="toc-number">3.4.</span> <span class="toc-text">3、4 引申-发布一个web网站</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4%E3%80%81HTTP"><span class="toc-number">4.</span> <span class="toc-text">4、HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%811-%E4%BB%80%E4%B9%88%E6%98%AFHTTP"><span class="toc-number">4.1.</span> <span class="toc-text">4、1 什么是HTTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%812-HTTP%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%97%B6%E4%BB%A3"><span class="toc-number">4.2.</span> <span class="toc-text">4、2 HTTP的两个时代</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%813-HTTP%E8%AF%B7%E6%B1%82"><span class="toc-number">4.3.</span> <span class="toc-text">4、3 HTTP请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81-%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-number">4.3.1.</span> <span class="toc-text">1、 请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81-HTTP-Request-headers-%E6%B6%88%E6%81%AF%E5%A4%B4%EF%BC%88%E8%AF%B7%E6%B1%82%E5%A4%B4%EF%BC%89"><span class="toc-number">4.3.2.</span> <span class="toc-text">2、 HTTP Request headers - 消息头（请求头）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81-%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-number">4.3.3.</span> <span class="toc-text">3、 请求体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%814-HTTP%E5%93%8D%E5%BA%94"><span class="toc-number">4.4.</span> <span class="toc-text">4、4 HTTP响应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81-%E5%93%8D%E5%BA%94%E8%A1%8C"><span class="toc-number">4.4.1.</span> <span class="toc-text">1、 响应行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81-%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-number">4.4.2.</span> <span class="toc-text">2、 响应头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81-%E5%93%8D%E5%BA%94%E4%BD%93"><span class="toc-number">4.4.3.</span> <span class="toc-text">3、 响应体</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5%E3%80%81-Maven"><span class="toc-number">5.</span> <span class="toc-text">5、 Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%811-Maven%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">5.1.</span> <span class="toc-text">5、1 Maven项目架构管理工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%812-Maven%E4%B8%8B%E8%BD%BD"><span class="toc-number">5.2.</span> <span class="toc-text">5、2 Maven下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%813-Maven%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.3.</span> <span class="toc-text">5、3 Maven配置环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%814-%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F"><span class="toc-number">5.4.</span> <span class="toc-text">5、4 阿里云镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%815-%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93"><span class="toc-number">5.5.</span> <span class="toc-text">5、5 本地仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%816-%E5%9C%A8IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8Maven"><span class="toc-number">5.6.</span> <span class="toc-text">5、6 在IDEA中使用Maven</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%817-%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%9A%84Maven%E9%A1%B9%E7%9B%AE"><span class="toc-number">5.7.</span> <span class="toc-text">5、7 创建普通的Maven项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%818-%E6%A0%87%E8%AE%B0%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8A%9F%E8%83%BD"><span class="toc-number">5.8.</span> <span class="toc-text">5、8 标记文件夹功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%819-%E5%9C%A8IDEA%E4%B8%AD%E9%85%8D%E7%BD%AETomcat"><span class="toc-number">5.9.</span> <span class="toc-text">5、9 在IDEA中配置Tomcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%8110-POM%E6%96%87%E4%BB%B6"><span class="toc-number">5.10.</span> <span class="toc-text">5、10 POM文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#maven%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%AF%BC%E5%87%BA%E9%97%AE%E9%A2%98-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-number">5.11.</span> <span class="toc-text">maven资源文件导出问题 解决方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6%E3%80%81-Servlet"><span class="toc-number">6.</span> <span class="toc-text">6、 Servlet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%811-Servlet%E7%AE%80%E4%BB%8B"><span class="toc-number">6.1.</span> <span class="toc-text">6、1 Servlet简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%812-HelloServlet"><span class="toc-number">6.2.</span> <span class="toc-text">6、2 HelloServlet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%813-Servlet%E5%8E%9F%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">6、3 Servlet原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%814-Mapping%E9%97%AE%E9%A2%98"><span class="toc-number">6.4.</span> <span class="toc-text">6、4 Mapping问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%815-ServletContext"><span class="toc-number">6.5.</span> <span class="toc-text">6、5 ServletContext</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ServletContext%E5%8A%9F%E8%83%BD"><span class="toc-number">6.5.1.</span> <span class="toc-text">ServletContext功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">6.5.1.1.</span> <span class="toc-text">1、共享数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E8%8E%B7%E5%8F%96%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%82%E6%95%B0"><span class="toc-number">6.5.1.2.</span> <span class="toc-text">2、获取初始化参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">6.5.1.3.</span> <span class="toc-text">3、请求转发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E5%92%8C%E9%87%8D%E5%AE%9A%E5%90%91%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">6.5.1.3.1.</span> <span class="toc-text">请求转发和重定向的问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81-%E8%AE%BF%E9%97%AE%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">6.5.2.</span> <span class="toc-text">4、 访问资源文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%816-HttpServletResponse"><span class="toc-number">6.6.</span> <span class="toc-text">6、6 HttpServletResponse</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">6.6.1.</span> <span class="toc-text">分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%9F%E8%B4%A3%E7%BB%99%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">6.6.1.1.</span> <span class="toc-text">负责给浏览器发送数据的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%9F%E8%B4%A3%E7%BB%99%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%91%E9%80%81%E5%93%8D%E5%BA%94%E5%A4%B4%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">6.6.1.2.</span> <span class="toc-text">负责给浏览器发送响应头的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E7%9A%84%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">6.6.1.3.</span> <span class="toc-text">响应的状态码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">6.6.2.</span> <span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BE%93%E5%87%BA%E5%90%84%E7%A7%8D%E4%BF%A1%E6%81%AF"><span class="toc-number">6.6.2.1.</span> <span class="toc-text">给浏览器输出各种信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6"><span class="toc-number">6.6.2.2.</span> <span class="toc-text">下载文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD"><span class="toc-number">6.6.2.3.</span> <span class="toc-text">验证码功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">6.6.2.4.</span> <span class="toc-text">实现重定向</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%817-HttpServletRequest"><span class="toc-number">6.7.</span> <span class="toc-text">6、7 HttpServletRequest</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%89%8D%E7%AB%AF%E4%BC%A0%E9%80%92%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%8C%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">6.7.1.</span> <span class="toc-text">获取前端传递的参数，请求转发</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7%E3%80%81Cookie%E3%80%81Session"><span class="toc-number">7.</span> <span class="toc-text">7、Cookie、Session</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%811-%E4%BC%9A%E8%AF%9D"><span class="toc-number">7.1.</span> <span class="toc-text">7、1 会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%812-%E4%BF%9D%E5%AD%98%E4%BC%9A%E8%AF%9D%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%8A%80%E6%9C%AF"><span class="toc-number">7.2.</span> <span class="toc-text">7、2 保存会话的两种技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%813-Cookie"><span class="toc-number">7.3.</span> <span class="toc-text">7、3 Cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%814-Session%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">7.4.</span> <span class="toc-text">7、4 Session（重点）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8%E3%80%81JSP"><span class="toc-number">8.</span> <span class="toc-text">8、JSP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%811-%E4%BB%80%E4%B9%88%E6%98%AFJSP"><span class="toc-number">8.1.</span> <span class="toc-text">8、1 什么是JSP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%812-JSP%E5%8E%9F%E7%90%86"><span class="toc-number">8.2.</span> <span class="toc-text">8、2 JSP原理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9%E3%80%81-JavaBean"><span class="toc-number">9.</span> <span class="toc-text">9、 JavaBean</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10%E3%80%81-MVC%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">10.</span> <span class="toc-text">10、 MVC三层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%811-%E6%97%A9%E6%9C%9F%E6%9E%B6%E6%9E%84"><span class="toc-number">10.1.</span> <span class="toc-text">10、1 早期架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%812-MVC%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">10.2.</span> <span class="toc-text">10、2 MVC三层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Model"><span class="toc-number">10.2.1.</span> <span class="toc-text">Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#VIEW"><span class="toc-number">10.2.2.</span> <span class="toc-text">VIEW</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller%EF%BC%88Servlet%EF%BC%89"><span class="toc-number">10.2.3.</span> <span class="toc-text">Controller（Servlet）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11%E3%80%81-%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89Filter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">11.</span> <span class="toc-text">11、 （重点）Filter过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%811-%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">11.1.</span> <span class="toc-text">11、1 什么是过滤器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%812-Filter%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">11.2.</span> <span class="toc-text">11、2 Filter开发步骤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12%E3%80%81%E7%9B%91%E5%90%AC%E5%99%A8Listener"><span class="toc-number">12.</span> <span class="toc-text">12、监听器Listener</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%811-%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">12.1.</span> <span class="toc-text">12、1 什么是监听器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%812-%E7%9B%91%E5%90%AC%E5%8E%9F%E7%90%86"><span class="toc-number">12.2.</span> <span class="toc-text">12、2 监听原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%813-%E5%BA%94%E7%94%A8%E4%BE%8B%E5%AD%90%E6%B5%8B%E8%AF%95"><span class="toc-number">12.3.</span> <span class="toc-text">12、3 应用例子测试</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13%E3%80%81-%E8%BF%87%E6%BB%A4%E5%99%A8-%E7%9B%91%E5%90%AC%E5%99%A8-%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8"><span class="toc-number">13.</span> <span class="toc-text">13、 过滤器 监听器 常见应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%811-%E7%9B%91%E5%90%AC%E5%99%A8GUI"><span class="toc-number">13.1.</span> <span class="toc-text">13、1 监听器GUI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13%E3%80%812-Filter%E5%AE%9E%E7%8E%B0%E6%9D%83%E9%99%90%E6%8B%A6%E6%88%AA"><span class="toc-number">13.2.</span> <span class="toc-text">13、2 Filter实现权限拦截</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#14%E3%80%81-JDBC"><span class="toc-number">14.</span> <span class="toc-text">14、 JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%811-JDBC%E5%9B%BA%E5%AE%9A%E6%AD%A5%E9%AA%A4"><span class="toc-number">14.1.</span> <span class="toc-text">14、1 JDBC固定步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14%E3%80%812-JDBC%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.2.</span> <span class="toc-text">14、2  JDBC事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Junit%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">14.2.1.</span> <span class="toc-text">Junit单元测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JDBC%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A"><span class="toc-number">14.2.2.</span> <span class="toc-text">JDBC事务回滚</span></a></li></ol></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/UesugiEr11.github.io/2021/06/02/Mysql%E8%BF%9B%E9%98%B6/" title="Mysql进阶"><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20210602195137767.png" onerror="this.onerror=null;this.src='/UesugiEr11.github.io/img/404.jpg'" alt="Mysql进阶"/></a><div class="content"><a class="title" href="/UesugiEr11.github.io/2021/06/02/Mysql%E8%BF%9B%E9%98%B6/" title="Mysql进阶">Mysql进阶</a><time datetime="2021-06-02T12:34:12.103Z" title="发表于 2021-06-02 20:34:12">2021-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/UesugiEr11.github.io/2021/04/22/Java%E5%B9%B6%E5%8F%91/" title="Java并发"><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20210422215218792.png" onerror="this.onerror=null;this.src='/UesugiEr11.github.io/img/404.jpg'" alt="Java并发"/></a><div class="content"><a class="title" href="/UesugiEr11.github.io/2021/04/22/Java%E5%B9%B6%E5%8F%91/" title="Java并发">Java并发</a><time datetime="2021-04-22T14:26:11.873Z" title="发表于 2021-04-22 22:26:11">2021-04-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/UesugiEr11.github.io/2021/03/29/JVM/" title="JVM"><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20210329143528531.png" onerror="this.onerror=null;this.src='/UesugiEr11.github.io/img/404.jpg'" alt="JVM"/></a><div class="content"><a class="title" href="/UesugiEr11.github.io/2021/03/29/JVM/" title="JVM">JVM</a><time datetime="2021-03-29T07:51:18.960Z" title="发表于 2021-03-29 15:51:18">2021-03-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/UesugiEr11.github.io/2021/03/21/SpringBoot/" title="SpringBoot"><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20210321190228486.png" onerror="this.onerror=null;this.src='/UesugiEr11.github.io/img/404.jpg'" alt="SpringBoot"/></a><div class="content"><a class="title" href="/UesugiEr11.github.io/2021/03/21/SpringBoot/" title="SpringBoot">SpringBoot</a><time datetime="2021-03-21T11:04:51.373Z" title="发表于 2021-03-21 19:04:51">2021-03-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/UesugiEr11.github.io/2021/03/18/SSM%E6%95%B4%E5%90%88/" title="SSM整合"><img src="https://gitee.com/UesugiEr11/pictures/raw/master/img/image-20210318222358752.png" onerror="this.onerror=null;this.src='/UesugiEr11.github.io/img/404.jpg'" alt="SSM整合"/></a><div class="content"><a class="title" href="/UesugiEr11.github.io/2021/03/18/SSM%E6%95%B4%E5%90%88/" title="SSM整合">SSM整合</a><time datetime="2021-03-18T14:26:02.754Z" title="发表于 2021-03-18 22:26:02">2021-03-18</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Erii</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/UesugiEr11.github.io/js/utils.js"></script><script src="/UesugiEr11.github.io/js/main.js"></script><script src="/UesugiEr11.github.io/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>(function(){
  const bp = document.createElement('script');
  const curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
  bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  bp.dataset.pjax = ''
  const s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})()</script></div></body></html>